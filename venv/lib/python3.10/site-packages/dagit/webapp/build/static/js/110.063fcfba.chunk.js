(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[110],{10412:function(e,n,t){"use strict";t.r(n),t.d(n,{InstanceRoot:function(){return Do},default:function(){return Ao}});var r,i,o,s,a=t(87067),l=t(325),c=t(27601),u=t(99500),d=t(52600),p=t(74942),h=t(30804),f=t(32030),m=t(34595),g=t(78093),x=t(39061),v=t(82348),y=t(78072),j=t(1223),w=t(95764),b=t(19065),C=t(54268),k=t(58591),S=t(7838),T=t(31269),N=t(89646),I=t(60736),_=t(60652),E=t(74549),R=t(19102),Z=t(55419),O=t(18819),P=t(64424),L=t(44198),F=t(30057),D=t(55752),A=t(5484),K=t(37099),U=t(25582),z=t(25466),M=t(12745),q=t(42658),G=t(71725),$=t(7748),J=t(33208),Q=t(10922),W=t(62e3),B=t(34449),V=t(32289),H=function(e){var n=e.assetId,t=e.loadedFromRepo,r=(0,d.useQuery)(Y).data,i=("RepositoryConnection"===(null===r||void 0===r?void 0:r.repositoriesOrError.__typename)?r.repositoriesOrError.nodes.filter((function(e){return e.name!==t.name||e.location.name!==t.location})):[]).filter((function(e){return e.assetNodes.some((function(e){return e.id===n&&e.opNames.length}))}));return 0===i.length?(0,V.jsx)("span",{}):(0,V.jsx)(f.x,{padding:{vertical:16,left:24,right:12},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,V.jsx)(I.b,{intent:"info",title:"Multiple repositories in your workspace include assets with this name. Showing the definition from ".concat((0,K.i)(t.name,t.location)," below. (Also found in ").concat(i.map((function(e){return(0,K.i)(e.name,e.location.name)})).join(", "),"). You may want to consider renaming to avoid collisions.")})})},Y=(0,p.Ps)(r||(r=(0,u.Z)(["\n  query AssetIdScanQuery {\n    repositoriesOrError {\n      __typename\n      ... on RepositoryConnection {\n        nodes {\n          id\n          name\n          location {\n            id\n            name\n          }\n          assetNodes {\n            id\n            opNames\n          }\n        }\n      }\n    }\n  }\n"]))),X=t(7713),ee=t(922),ne=t(77171),te=function(e){var n=e.items,t=e.liveDataByNode,r=(0,c.k6)();return null===n?(0,V.jsx)(re,{flex:{alignItems:"center",justifyContent:"center"},children:(0,V.jsx)(m.$,{purpose:"section"})}):(0,V.jsx)(re,{flex:{gap:4},padding:{horizontal:12},children:n.map((function(e){return(0,V.jsx)(ie,{onClick:function(n){n.stopPropagation(),r.push((0,ne.p)(e.assetKey,{view:"definition"}))},children:(0,V.jsx)($.p4,{definition:e,inAssetCatalog:!0,selected:!1,liveData:t[(0,x.Wu)(e.assetKey)]})},e.id)}))})},re=(0,ee.ZP)(f.x).withConfig({displayName:"AssetNodeList__Container",componentId:"sc-1ee72i3-0"})(["height:144px;overflow-x:auto;width:100%;white-space:nowrap;"]),ie=ee.ZP.div.withConfig({displayName:"AssetNodeList__AssetNodeWrapper",componentId:"sc-1ee72i3-1"})(["cursor:pointer;width:240px;flex-shrink:0;"]),oe=t(95609),se=function(e){var n=e.assetNode,t=e.upstream,r=e.downstream,i=e.liveDataByNode,o=(0,oe.d)([n.assetKey]),s=(0,X.U6)(n),a=s.assetMetadata,l=s.assetType,c=(0,B.d)(n),u=(0,K.k)(n.repository.name,n.repository.location.name);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(H,{assetId:n.id,loadedFromRepo:u}),(0,V.jsxs)(f.x,{flex:{direction:"row"},style:{flex:1},children:[(0,V.jsxs)(f.x,{style:{flex:1,minWidth:0},flex:{direction:"column"},border:{side:"right",width:1,color:S.w.KeylineGray},children:[(0,V.jsxs)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:[(0,V.jsx)(M.pm,{children:"Description"}),(0,V.jsx)(ae,{assetNode:n,repoAddress:u})]}),(0,V.jsx)(f.x,{padding:{vertical:16,horizontal:24},style:{flex:1,flexBasis:"content",flexGrow:0,minHeight:120},children:(0,V.jsx)(Q.d,{description:n.description||"No description provided.",maxHeight:260})}),n.partitionDefinition&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:S.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:(0,V.jsx)(M.pm,{children:"Partitions"})}),(0,V.jsxs)(f.x,{padding:{top:16,horizontal:24,bottom:24},flex:{direction:"column",gap:16},children:[(0,V.jsx)("p",{children:n.partitionDefinition}),(0,V.jsx)(oe.m,{assetKey:n.assetKey,data:o})]})]}),(0,V.jsxs)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:S.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:[(0,V.jsxs)(M.pm,{children:["Upstream Assets",null!==t&&void 0!==t&&t.length?" (".concat(t.length,")"):""]}),(0,V.jsx)(E.rU,{to:"?view=lineage&lineageScope=upstream",children:(0,V.jsxs)(f.x,{flex:{gap:4,alignItems:"center"},children:["View upstream graph",(0,V.jsx)(q.JO,{name:"open_in_new",color:S.w.Link})]})})]}),(0,V.jsx)(te,{items:t,liveDataByNode:i}),(0,V.jsxs)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:S.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:[(0,V.jsxs)(M.pm,{children:["Downstream Assets",null!==r&&void 0!==r&&r.length?" (".concat(r.length,")"):""]}),(0,V.jsx)(E.rU,{to:"?view=lineage&lineageScope=downstream",children:(0,V.jsxs)(f.x,{flex:{gap:4,alignItems:"center"},children:["View downstream graph",(0,V.jsx)(q.JO,{name:"open_in_new",color:S.w.Link})]})})]}),(0,V.jsx)(te,{items:r,liveDataByNode:i}),(0,V.jsx)("div",{style:{flex:1}})]}),c?(0,V.jsxs)(f.x,{border:{side:"vertical",width:1,color:S.w.KeylineGray},style:{flex:.5,minWidth:0},flex:{direction:"column"},children:[(0,V.jsx)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,V.jsx)(M.pm,{children:"Config"})}),(0,V.jsx)(f.x,{padding:{vertical:16,horizontal:24},children:(0,V.jsx)(G.L,{type:c,typesInScope:c.recursiveConfigTypes})})]}):null,(0,V.jsxs)(f.x,{style:{flex:.5,minWidth:0},flex:{direction:"column"},children:[(0,V.jsx)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,V.jsx)(M.pm,{children:"Type"})}),l?(0,V.jsx)(J.Ot,{type:l}):(0,V.jsx)(f.x,{padding:{vertical:16,horizontal:24},children:(0,V.jsx)(Q.d,{description:"No type data provided."})}),a.length>0&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:S.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:(0,V.jsx)(M.pm,{children:"Metadata"})}),(0,V.jsx)(f.x,{style:{flex:1},children:(0,V.jsx)(X.mQ,{assetMetadata:a})})]})]})]})]})},ae=function(e){var n=e.assetNode,t=e.repoAddress;return(0,V.jsxs)(f.x,{flex:{alignItems:"baseline",gap:16,wrap:"wrap"},style:{lineHeight:0},children:[n.jobNames.filter((function(e){return!(0,x.pv)(e)})).map((function(e){return(0,V.jsx)(M.fv,{children:(0,V.jsx)(W.h,{isJob:!0,showIcon:!0,pipelineName:e,pipelineHrefContext:t})},e)})),(0,V.jsx)(le,{assetNode:n,repoAddress:t}),(0,x.mX)(n)&&(0,V.jsx)(M.YS,{style:{lineHeight:"16px",marginTop:2},children:"Source Asset"})]})},le=function(e){var n=e.assetNode,t=e.repoAddress,r=n.assetKey,i=n.graphName,o=n.opNames,s=n.jobNames,a=o.length;if(!a)return null;if(!i){var l=o[0];if((0,x.ll)(r)===l)return null;var c=(0,U.$U)(t,"/ops/".concat(l));return(0,V.jsxs)(f.x,{flex:{gap:4,alignItems:"center"},children:[(0,V.jsx)(q.JO,{name:"op",size:16}),(0,V.jsx)(M.fv,{children:(0,V.jsx)(E.rU,{to:c,children:l})})]})}return s.length?(0,V.jsxs)(f.x,{flex:{gap:4,alignItems:"center"},children:[(0,V.jsx)(q.JO,{name:"schema",size:16}),(0,V.jsxs)(M.fv,{children:[(0,V.jsx)(E.rU,{to:(0,U.$U)(t,"/graphs/".concat(s[0],"/").concat(i,"/")),children:i})," (".concat(1===a?"1 op":"".concat(a," ops"),")")]})]}):null},ce=(0,p.Ps)(i||(i=(0,u.Z)(["\n  fragment AssetNodeDefinitionFragment on AssetNode {\n    id\n    ...AssetNodeConfigFragment\n    description\n    graphName\n    opNames\n    jobNames\n    partitionDefinition\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    ...AssetNodeFragment\n    ...AssetNodeOpMetadataFragment\n  }\n  ","\n  ","\n  ","\n"])),B.r,$.zU,X.Ws),ue=t(62816),de=t.n(ue),pe=t(86476),he=t(9315),fe=t(86875),me=function(e){var n=e.assetNode,t=e.repoAddress,r=de()(n.jobs,(function(e){return e.schedules})),i=de()(n.jobs,(function(e){return e.sensors}));return(0,V.jsx)(pe.I,{repoAddress:t,schedules:r,sensors:i,showSwitch:!1})},ge=(0,p.Ps)(o||(o=(0,u.Z)(["\n  fragment AssetNodeInstigatorsFragment on AssetNode {\n    id\n    jobs {\n      id\n      name\n      schedules {\n        id\n        __typename\n        ...ScheduleSwitchFragment\n      }\n      sensors {\n        id\n        __typename\n        ...SensorSwitchFragment\n      }\n    }\n  }\n  ","\n  ","\n"])),he.J,fe.U),xe=t(87011),ve=t(50346),ye=t(75453),je=t(88863),we=t(96391),be=t(66870),Ce=t(38376),ke=t(35555),Se=t(76867),Te=t(76314),Ne="lineageGraphZoomLevel",Ie=function(e){var n=e.assetNode,t=e.assetGraphData,r=e.liveDataByNode,i=e.params,o=(0,x.Wu)(n.assetKey),s=l.useState(null),a=(0,b.Z)(s,2),u=a[0],d=a[1],p=(0,Se.oJ)(t),h=p.layout,g=p.loading,v=l.useRef(),y=(0,c.k6)();return l.useEffect((function(){if(v.current&&h){var e=Number((0,Te.n)(Ne));v.current.autocenter(!1,e),v.current.focus()}}),[v,h,o]),!h||g?(0,V.jsx)(f.x,{style:{flex:1},flex:{alignItems:"center",justifyContent:"center"},children:(0,V.jsx)(m.$,{purpose:"page"})}):(0,V.jsx)(ke.l,{ref:function(e){return v.current=e||void 0},interactor:ke.l.Interactors.PanAndZoom,graphWidth:h.width,graphHeight:h.height,onDoubleClick:function(e){var n;null===(n=v.current)||void 0===n||n.autocenter(!0),e.stopPropagation()},maxZoom:1.2,maxAutocenterZoom:1.2,children:function(e){var n=e.scale;return(0,V.jsxs)(Ee,{width:h.width,height:h.height,children:[v.current&&(0,V.jsx)(_e,{scale:n}),(0,V.jsx)(we.B,{highlighted:u,edges:h.edges}),Object.values(h.nodes).map((function(e){var s=e.id,a=e.bounds,c=t.nodes[s],u=JSON.parse(s);return(0,l.createElement)("foreignObject",(0,w.Z)((0,w.Z)({},a),{},{key:s,style:{overflow:"visible"},onMouseEnter:function(){return d(s)},onMouseLeave:function(){return d(null)},onClick:function(){return e={path:u},void y.push((0,ne.p)(e,(0,w.Z)((0,w.Z)({},i),{},{lineageScope:"neighbors"})));var e},onDoubleClick:function(e){var n;null===(n=v.current)||void 0===n||n.zoomToSVGBox(a,!0,1.2),e.stopPropagation()}}),c&&c.definition.opNames.length?n<be.CZ?(0,V.jsx)($.t$,{definition:c.definition,selected:c.id===o}):(0,V.jsx)($.p4,{definition:c.definition,liveData:r[c.id],selected:c.id===o}):(0,V.jsx)(Ce.e,{assetKey:{path:u}}))}))]})}})},_e=function(e){var n=e.scale;return l.useEffect((function(){try{window.localStorage.setItem(Ne,JSON.stringify(n))}catch(e){}}),[n]),(0,V.jsx)(V.Fragment,{})},Ee=ee.ZP.svg.withConfig({displayName:"AssetNodeLineageGraph__SVGContainer",componentId:"q47dxd-0"})(["overflow:visible;border-radius:0;"]),Re=t(60445),Ze=function(e){var n=e.params,t=e.setParams,r=e.assetNode,i=e.liveDataByNode,o=e.assetGraphData,s=e.graphQueryItems,a=e.requestedDepth,c=l.useMemo((function(){return(0,O.B)(s,r.assetKey)}),[s,r]),u="upstream"===n.lineageScope?c.upstream:"downstream"===n.lineageScope?c.downstream:Math.max(c.upstream,c.downstream);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(f.x,{flex:{justifyContent:"space-between",alignItems:"center",gap:12},padding:{left:24,right:12,vertical:12},border:{side:"bottom",color:S.w.KeylineGray,width:1},children:[(0,V.jsx)(xe.h,{activeItems:new Set([n.lineageScope||"neighbors"]),buttons:[{id:"neighbors",label:"Nearest Neighbors",icon:"graph_neighbors"},{id:"upstream",label:"Upstream",icon:"graph_upstream"},{id:"downstream",label:"Downstream",icon:"graph_downstream"}],onClick:function(e){return t((0,w.Z)((0,w.Z)({},n),{},{lineageScope:e,lineageDepth:void 0}))}}),(0,V.jsx)(Oe,{value:Math.max(1,Math.min(u,a)),onChange:function(e){return t((0,w.Z)((0,w.Z)({},n),{},{lineageDepth:e}))},max:u}),(0,V.jsx)(ve.X,{format:"switch",label:"Include secondary edges",checked:!!n.lineageShowSecondaryEdges,onChange:function(){return t((0,w.Z)((0,w.Z)({},n),{},{lineageShowSecondaryEdges:!n.lineageShowSecondaryEdges||void 0}))}}),(0,V.jsx)("div",{style:{flex:1}}),Object.values(o.nodes).length>1?(0,V.jsx)(Re.XE,{assetKeys:Object.values(o.nodes).map((function(e){return e.assetKey})),liveDataByNode:i,intent:"none",context:"all"}):(0,V.jsx)(ye.zx,{icon:(0,V.jsx)(q.JO,{name:"materialization"}),disabled:!0,children:"Materialize all"})]}),(0,V.jsx)(Ie,{assetNode:r,liveDataByNode:i,assetGraphData:o,params:n})]})},Oe=function(e){var n=e.value,t=e.max,r=e.onChange,i=l.useState("".concat(n)),o=(0,b.Z)(i,2),s=o[0],a=o[1];l.useEffect((function(){a("".concat(n))}),[n]);var c=function(){var e=Number(s)?Math.min(t,Number(s)):n;r(e)};return(0,V.jsxs)(f.x,{flex:{gap:8,alignItems:"center"},children:[(0,V.jsxs)(ye.zH,{children:[(0,V.jsx)(ye.zx,{disabled:n<=1,onClick:function(){return r(n-1)},icon:(0,V.jsx)(q.JO,{name:"arrow_back"})}),(0,V.jsx)(je.oi,{min:1,max:t,disabled:t<=1,inputMode:"numeric",style:{width:40,marginLeft:2,textAlign:"center",height:32,padding:6,borderRadius:0,boxShadow:"none",border:"1px solid ".concat(S.w.Gray300)},value:s,onChange:function(e){return a(e.target.value)},onKeyDown:function(e){return"Enter"===e.key||"Return"===e.key?c():void 0},onBlur:function(){return c()}},n),(0,V.jsx)(ye.zx,{disabled:n>=t,onClick:function(){return r(n+1)},icon:(0,V.jsx)(q.JO,{name:"arrow_forward"})}),(0,V.jsx)(ye.zx,{disabled:n>=t,onClick:function(){return r(t)},children:"All"})]}),"Layers shown"]})},Pe=function(e){var n,t,r=e.assetKey,i=(0,L.q)({}),o=(0,b.Z)(i,2),s=o[0],a=o[1],c=(0,d.useQuery)($e,{variables:{assetKey:{path:r.path}},notifyOnNetworkStatusChange:!0}),u=(c.data||c.previousData||{}).assetOrError,p=u&&"Asset"===u.__typename?u:null,h=null===p||void 0===p||null===(n=p.assetMaterializations[0])||void 0===n?void 0:n.timestamp,g=!s.asOf||Number(h)<=Number(s.asOf),v=null===p||void 0===p?void 0:p.definition,y=v?(0,K.k)(v.repository.name,v.repository.location.name):null,N=(0,x.Je)(r),I="neighbors"===s.lineageScope?2:5,_=Number(s.lineageDepth)||I,Z="+".repeat(_),M=(0,O.u)("lineage"===s.view&&"upstream"===s.lineageScope?"".concat(Z,'"').concat(N,'"'):"lineage"===s.view&&"downstream"===s.lineageScope?'"'.concat(N,'"').concat(Z):"".concat(Z,'"').concat(N,'"').concat(Z),{hideEdgesToNodesOutsideQuery:!s.lineageShowSecondaryEdges}),q=M.assetGraphData,G=M.graphAssetKeys,$=M.graphQueryItems,J=function(e,n){var t=(0,x.Wu)(n);return l.useMemo((function(){return e?{upstream:Object.values(e.nodes).filter((function(n){var r;return null===(r=e.upstream[t])||void 0===r?void 0:r[(0,x.Wu)(n.assetKey)]})).map((function(e){return e.definition})),downstream:Object.values(e.nodes).filter((function(n){var r;return null===(r=e.downstream[t])||void 0===r?void 0:r[(0,x.Wu)(n.assetKey)]})).map((function(e){return e.definition}))}:{upstream:null,downstream:null}}),[e,t])}(q,r),Q=J.upstream,W=J.downstream,B=(0,P.l)(G),H=B.liveResult,Y=B.liveDataByNode,X=(0,R.V5)((0,R.C4)(c,R.dT),(0,R.C4)(H,R.dT));(0,D.Qs)(c.refetch),(0,D.Qs)(H.refetch);var ee=void 0!==v,ne=(null===(t=Y[(0,x.Wu)(r)])||void 0===t?void 0:t.computeStatus)===A.tn.OUT_OF_DATE;return(0,V.jsxs)(f.x,{flex:{direction:"column"},style:{height:"100%",width:"100%",overflowY:"auto"},children:[(0,V.jsx)(j.K,{assetKey:r,tags:(0,V.jsxs)(V.Fragment,{children:[y?(0,V.jsxs)(C.V,{icon:"asset",children:["Asset in ",(0,V.jsx)(F.b,{repoAddress:y})]}):(0,V.jsx)(C.V,{icon:"asset_non_sda",children:"Asset"}),v&&y&&(0,V.jsx)(me,{assetNode:v,repoAddress:y}),v&&y&&v.groupName&&(0,V.jsx)(C.V,{icon:"asset_group",children:(0,V.jsx)(E.rU,{to:(0,U.$U)(y,"/asset-groups/".concat(v.groupName)),children:v.groupName})}),ne?(0,V.jsx)(f.x,{onClick:function(){return a((0,w.Z)((0,w.Z)({},s),{},{view:"lineage",lineageScope:"upstream"}))},children:(0,V.jsx)(k.m,{fillColor:S.w.Yellow50,textColor:S.w.Yellow700,label:"Upstream changed",interactive:!0})}):void 0]}),tabs:(0,V.jsxs)(T.mQ,{size:"large",selectedTabId:s.view||"activity",children:[(0,V.jsx)(T.OK,{id:"activity",title:"Activity",onClick:function(){return a((0,w.Z)((0,w.Z)({},s),{},{view:"activity"}))}}),(0,V.jsx)(T.OK,{id:"definition",title:"Definition",onClick:function(){return a((0,w.Z)((0,w.Z)({},s),{},{view:"definition"}))},disabled:!v}),(0,V.jsx)(T.OK,{id:"lineage",title:"Lineage",onClick:function(){return a((0,w.Z)((0,w.Z)({},s),{},{view:"lineage"}))},disabled:!v})]}),right:(0,V.jsxs)(f.x,{style:{margin:"-4px 0"},flex:{gap:12,alignItems:"baseline"},children:[(0,V.jsx)(f.x,{margin:{top:4},children:(0,V.jsx)(R.xi,{refreshState:X})}),v&&v.jobNames.length>0&&y&&Q&&(0,V.jsx)(Re.XE,{assetKeys:[v.assetKey],liveDataByNode:Y})]})}),(0,V.jsx)("div",{children:c.loading&&!c.previousData?(0,V.jsx)(f.x,{style:{height:390},flex:{direction:"row",justifyContent:"center",alignItems:"center"},children:(0,V.jsx)(m.$,{purpose:"page"})}):g?null:(0,V.jsx)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,V.jsx)(Je,{asOf:s.asOf,onClick:function(){return a({asOf:void 0,time:s.asOf})},hasDefinition:!!v})})}),ee&&("definition"===s.view?v?(0,V.jsx)(se,{assetNode:v,upstream:Q,downstream:W,liveDataByNode:Y}):(0,V.jsx)(Le,{}):"lineage"===s.view?v?q?(0,V.jsx)(Ze,{params:s,setParams:a,assetNode:v,liveDataByNode:Y,assetGraphData:q,requestedDepth:_,graphQueryItems:$}):(0,V.jsx)(f.x,{style:{flex:1},flex:{alignItems:"center",justifyContent:"center"},children:(0,V.jsx)(m.$,{purpose:"page"})}):(0,V.jsx)(Le,{}):(0,V.jsx)(z.s,{assetKey:r,assetLastMaterializedAt:h,assetHasDefinedPartitions:!(null===v||void 0===v||!v.partitionDefinition),params:s,paramsTimeWindowOnly:!!s.asOf,setParams:a,liveData:v?Y[(0,x.Wu)(v.assetKey)]:void 0}))]})},Le=function(){return(0,V.jsx)(f.x,{padding:{vertical:32},children:(0,V.jsx)(N.t,{title:"No definition",description:"This asset doesn't have a software definition in any of your loaded repositories.",icon:"materialization"})})};var Fe,De,Ae,Ke,Ue,ze,Me,qe,Ge,$e=(0,p.Ps)(s||(s=(0,u.Z)(["\n  query AssetQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        key {\n          path\n        }\n\n        assetMaterializations(limit: 1) {\n          timestamp\n        }\n\n        definition {\n          id\n          groupName\n          partitionDefinition\n          repository {\n            id\n            name\n            location {\n              id\n              name\n            }\n          }\n\n          ...AssetNodeInstigatorsFragment\n          ...AssetNodeDefinitionFragment\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),ge,ce),Je=function(e){var n=e.asOf,t=e.onClick,r=e.hasDefinition;return(0,V.jsx)(I.b,{intent:"info",title:(0,V.jsxs)("span",{children:["This is a historical view of materializations as of"," ",(0,V.jsx)("span",{style:{fontWeight:600},children:(0,V.jsx)(Z.E,{timestamp:{ms:Number(n)},timeFormat:{showSeconds:!0,showTimezone:!0}})}),"."]}),description:(0,V.jsx)(_.Z,{onClick:t,underline:"always",children:r?"Show definition and latest materializations":"Show latest materializations"})})},Qe=t(25907),We=function(){var e;(0,g.Px)();var n=(0,c.UO)(),t=(0,c.k6)(),r=(n[0]||"").split("/").filter((function(e){return e})).map(decodeURIComponent),i=(0,d.useQuery)(Be,{skip:0===r.length,variables:{assetKey:{path:r}}});return(0,v.j)(r&&r.length?"Assets: ".concat((0,x.ll)({path:r})):"Assets"),i.loading?(0,V.jsxs)(h.T,{children:[(0,V.jsx)(j.K,{assetKey:{path:r}}),(0,V.jsx)(f.x,{padding:64,children:(0,V.jsx)(m.$,{purpose:"page"})})]}):0===r.length||"AssetNotFoundError"===(null===(e=i.data)||void 0===e?void 0:e.assetOrError.__typename)?(0,V.jsxs)(h.T,{children:[(0,V.jsx)(j.K,{assetKey:{path:r},right:(0,V.jsxs)(f.x,{flex:{gap:12,alignItems:"center"},children:[(0,V.jsx)(j.w,{}),(0,V.jsx)(y.i,{label:"Reload definitions"})]})}),(0,V.jsx)(Qe.f,{prefixPath:r,setPrefixPath:function(e){return t.push((0,ne.p)({path:e}))}})]}):(0,V.jsx)(Pe,{assetKey:{path:r}})},Be=(0,p.Ps)(Fe||(Fe=(0,u.Z)(["\n  query AssetsCatalogRootQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      __typename\n      ... on Asset {\n        id\n        key {\n          path\n        }\n      }\n    }\n  }\n"]))),Ve=t(31112),He=t(8358),Ye=t(93141),Xe=t(76336),en=function(){var e=l.useContext(Xe.C5),n=e.allRepos,t=e.visibleRepos,r=e.toggleVisible,i=l.useState(!1),o=(0,b.Z)(i,2),s=o[0],a=o[1];return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(He.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:s,style:{width:"auto"},onClose:function(){return a(!1)},children:[(0,V.jsx)(He.fK,{icon:"repo",label:"Repositories"}),(0,V.jsx)(Ye.e,{options:n,onBrowse:function(){return a(!1)},onToggle:r,selected:t}),(0,V.jsx)(He.cN,{children:(0,V.jsx)(f.x,{padding:{top:8},children:(0,V.jsx)(ye.zx,{intent:"none",onClick:function(){return a(!1)},children:"Done"})})})]}),(0,V.jsx)(ye.zx,{intent:"none",icon:(0,V.jsx)(q.JO,{name:"folder"}),rightIcon:(0,V.jsx)(q.JO,{name:"expand_more"}),onClick:function(){return a(!0)},children:"".concat(t.length," of ").concat(n.length," Repositories")})]})},nn=t(96294),tn="__GLOBAL__",rn=function(){var e=(0,c.UO)()[0],n=l.useContext(Xe.C5),t=n.allRepos,r=n.visibleRepos,i=(0,c.k6)();(0,v.j)("Global Asset Lineage");var o=l.useCallback((function(e,n){i[n]("/instance/asset-groups".concat((0,nn.gY)((0,w.Z)((0,w.Z)({},e),{},{pipelineName:tn})).replace(tn,"")))}),[i]),s=l.useCallback((function(e){i.push((0,ne.p)(e.assetKey,{view:"definition"}))}),[i]),a=l.useMemo((function(){return{hideEdgesToNodesOutsideQuery:!1,hideNodesMatching:function(e){return!r.some((function(n){return n.repositoryLocation.name===e.repository.location.name&&n.repository.name===e.repository.name}))}}}),[r]);return(0,V.jsxs)(h.T,{style:{display:"flex",flexDirection:"column",paddingBottom:0},children:[(0,V.jsx)(Ve.m,{title:(0,V.jsx)(M.X6,{children:"Global Asset Lineage"}),right:(0,V.jsx)("div",{style:{marginBottom:-8},children:(0,V.jsx)(y.i,{label:"Reload definitions"})})}),(0,V.jsx)(be.OK,{fetchOptions:a,fetchOptionFilters:(0,V.jsx)(V.Fragment,{children:t.length>1&&(0,V.jsx)(en,{})}),options:{preferAssetRendering:!0,explodeComposites:!0},explorerPath:(0,nn.p3)(tn+e||"/"),onChangeExplorerPath:o,onNavigateToForeignNode:s})]})},on=t(8546),sn=t(762),an=t(75011),ln=t(68156),cn=t(39956),un=t(59019),dn=t(17912),pn=t(14156),hn=t(25496),fn=t(12436),mn=t(47072),gn=t(41302),xn=t(52848),vn=t(57994),yn=t(98907),jn=t(64428),wn=t(28463),bn=t(6466),Cn=t(65502),kn=t.n(Cn),Sn=5242880,Tn=function(e){(0,jn.Z)(t,e);var n=(0,wn.Z)(t);function t(){var e;(0,vn.Z)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).timeout=null,e.contentContainer=l.createRef(),e.state={showScrollToTop:!1},e.hideWarning=function(){e.setState({showScrollToTop:!1}),e.timeout&&(clearTimeout(e.timeout),e.timeout=0)},e.scheduleHideWarning=function(){e.timeout=window.setTimeout(e.hideWarning,3e3)},e.cancelHideWarning=function(){e.timeout&&(clearTimeout(e.timeout),e.timeout=0)},e.onScrollUp=function(n){e.cancelHideWarning(),n?(e.setState({showScrollToTop:!0}),e.scheduleHideWarning()):e.hideWarning()},e.onScrollDown=function(n){e.hideWarning()},e.scrollToTop=function(){e.contentContainer.current&&e.contentContainer.current.scrollToTop()},e}return(0,yn.Z)(t,[{key:"renderScrollToTop",value:function(){var e=this;return this.state.showScrollToTop?(0,V.jsx)(Un,{children:(0,V.jsx)(zn,{onClick:function(){return e.scrollToTop()},onMouseOver:this.cancelHideWarning,onMouseOut:this.scheduleHideWarning,children:(0,V.jsxs)(bn.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,V.jsx)(q.JO,{name:"arrow_upward",color:S.w.White}),"Scroll to top"]})})}):null}},{key:"render",value:function(){var e=this.props,n=e.logData,t=e.isLoading,r=e.isVisible,i=e.downloadUrl,o=null===n||void 0===n?void 0:n.data,s=function(e){return!!e&&(new TextEncoder).encode(e).length>=Sn}(o);if(o&&s){var a=o.indexOf("\n")+1,l=a<o.length?o.slice(a):o;o="\x1b[33m...logs truncated...\x1b[39m\n"+l}var c=s?(0,V.jsx)(Kn,{children:(0,V.jsxs)(bn.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,V.jsx)(q.JO,{name:"warning",color:S.w.Yellow500}),(0,V.jsxs)("div",{children:["This log has exceeded the 5MB limit."," ",i?(0,V.jsx)("a",{href:i,download:!0,children:"Download the full log file"}):null,"."]})]})}):null;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(En,{isVisible:r,children:[this.renderScrollToTop(),(0,V.jsxs)(Fn,{children:[c,(0,V.jsx)(Dn,{children:(0,V.jsx)(An,{isSelected:!0,content:o,onScrollUp:this.onScrollUp,onScrollDown:this.onScrollDown,ref:this.contentContainer})})]}),t?(0,V.jsx)(Mn,{children:(0,V.jsx)(m.$,{purpose:"page"})}):null]}),(0,V.jsx)(Rn,{isVisible:r,children:null===n||void 0===n?void 0:n.path})]})}}]),t}(l.Component),Nn=(0,p.Ps)(De||(De=(0,u.Z)(["\n  fragment ComputeLogContentFileFragment on ComputeLogFile {\n    path\n    cursor\n    data\n    downloadUrl\n  }\n"]))),In=function(e){(0,jn.Z)(t,e);var n=(0,wn.Z)(t);function t(){var e;(0,vn.Z)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).container=l.createRef(),e.lastScroll=0,e.onScroll=function(){if(e.container.current&&e.props.isSelected){var n=e.props,t=n.onScrollUp,r=n.onScrollDown,i=e.container.current,o=i.scrollHeight,s=i.scrollTop/(o-i.offsetHeight);e.container.current.scrollTop<e.lastScroll?t&&t(s):r&&r(s),e.lastScroll=e.container.current.scrollTop}},e}return(0,yn.Z)(t,[{key:"componentDidMount",value:function(){this.scrollToBottom(),this.container.current&&(this.container.current.focus(),this.container.current.addEventListener("scroll",this.onScroll))}},{key:"getSnapshotBeforeUpdate",value:function(){if(!this.container.current)return!1;var e=this.container.current,n=e.scrollHeight,t=e.scrollTop;return e.offsetHeight+t>=n}},{key:"componentDidUpdate",value:function(e,n,t){t&&this.scrollToBottom(),this.props.isSelected&&!e.isSelected&&this.container.current&&this.container.current.focus()}},{key:"focus",value:function(){var e=this.container.current;e&&e.focus()}},{key:"scrollToBottom",value:function(){var e=this.container.current;e&&(e.scrollTop=e.scrollHeight-e.offsetHeight)}},{key:"scrollToTop",value:function(){var e=this.container.current;e&&(e.scrollTop=0,e.focus())}},{key:"render",value:function(){var e=this.props,n=e.content,t=e.className;return n?(0,V.jsx)("div",{className:t,style:{outline:"none"},ref:this.container,tabIndex:0,children:(0,V.jsxs)(Zn,{children:[(0,V.jsx)(_n,{content:n}),(0,V.jsxs)(On,{children:[(0,V.jsx)(Ln,{}),(0,V.jsx)(kn(),{linkify:!1,useClasses:!0,children:n})]})]})}):(0,V.jsx)("div",{className:t,ref:this.container,children:(0,V.jsx)(Zn,{style:{justifyContent:"center",alignItems:"center"},children:null==n?"No log file available":"No output"})})}}]),t}(l.Component),_n=function(e){var n=e.content;if(!n)return null;var t=n.match(/\n/g),r=t?t.length:0;return(0,V.jsx)(Pn,{children:Array.from(Array(r),(function(e,n){return(0,V.jsx)("div",{children:String(n+1)},n)}))})},En=ee.ZP.div.withConfig({displayName:"ComputeLogContent__FileContainer",componentId:"sc-1bosmfe-0"})(["flex:1;height:100%;position:relative;&:first-child{border-right:0.5px solid #5c7080;}display:flex;flex-direction:column;",""],(function(e){return e.isVisible?null:"display: none;"})),Rn=ee.ZP.div.withConfig({displayName:"ComputeLogContent__FileFooter",componentId:"sc-1bosmfe-1"})(["display:flex;flex-direction:row;align-items:center;height:30px;background-color:",";border-top:0.5px solid #5c7080;color:#aaaaaa;padding:2px 5px;font-size:0.85em;",""],S.w.Gray900,(function(e){return e.isVisible?null:"display: none;"})),Zn=ee.ZP.div.withConfig({displayName:"ComputeLogContent__ContentContainer",componentId:"sc-1bosmfe-2"})(["display:flex;flex-direction:row;min-height:100%;background-color:",";"],S.w.Gray900),On=ee.ZP.div.withConfig({displayName:"ComputeLogContent__Content",componentId:"sc-1bosmfe-3"})(["padding:10px;background-color:",";"],S.w.Gray900),Pn=ee.ZP.div.withConfig({displayName:"ComputeLogContent__LineNumberContainer",componentId:"sc-1bosmfe-4"})(["display:flex;flex-direction:column;align-items:flex-end;border-right:1px solid #5c7080;padding:10px 10px 10px 20px;margin-right:5px;background-color:",";opacity:0.8;color:#858585;min-height:100%;"],S.w.Gray900),Ln=(0,ee.vJ)(Ae||(Ae=(0,u.Z)(["\n  .ansi-black {\n    color: #586e75;\n  }\n  .ansi-red {\n    color: #dc322f;\n  }\n  .ansi-green {\n    color: #859900;\n  }\n  .ansi-yellow {\n    color: #b58900;\n  }\n  .ansi-blue {\n    color: #268bd2;\n  }\n  .ansi-magenta {\n    color: #d33682;\n  }\n  .ansi-cyan {\n    color: #2aa198;\n  }\n  .ansi-white {\n    color: #eee8d5;\n  }\n"]))),Fn=ee.ZP.div.withConfig({displayName:"ComputeLogContent__FileContent",componentId:"sc-1bosmfe-5"})(["flex:1;display:flex;flex-direction:column;"]),Dn=ee.ZP.div.withConfig({displayName:"ComputeLogContent__RelativeContainer",componentId:"sc-1bosmfe-6"})(["flex:1;position:relative;"]),An=(0,ee.ZP)(In).withConfig({displayName:"ComputeLogContent__LogContent",componentId:"sc-1bosmfe-7"})(["color:#eeeeee;font-family:",";font-size:16px;white-space:pre;overflow:auto;position:absolute;top:0;bottom:0;left:0;right:0;"],on.b.monospace),Kn=ee.ZP.div.withConfig({displayName:"ComputeLogContent__FileWarning",componentId:"sc-1bosmfe-8"})(["background-color:#fffae3;padding:10px 20px;margin:20px 70px;border-radius:5px;"]),Un=ee.ZP.div.withConfig({displayName:"ComputeLogContent__ScrollToast",componentId:"sc-1bosmfe-9"})(["position:absolute;height:30px;top:0;left:0;right:0;display:flex;flex-direction:row;justify-content:center;align-items:flex-start;z-index:1;"]),zn=ee.ZP.div.withConfig({displayName:"ComputeLogContent__ScrollToTop",componentId:"sc-1bosmfe-10"})(["background-color:black;padding:10px 20px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:white;border-bottom:0.5px solid #5c7080;border-left:0.5px solid #5c7080;border-right:0.5px solid #5c7080;cursor:pointer;"]),Mn=ee.ZP.div.withConfig({displayName:"ComputeLogContent__LoadingContainer",componentId:"sc-1bosmfe-11"})(["display:flex;justifycontent:center;alignitems:center;position:absolute;top:0;bottom:0;left:0;right:0;backgroundcolor:",";opacity:0.3;"],S.w.Gray800),qn=function(e){return e.length<Sn?e:e.slice(-5242880)},Gn=function(e,n){if(!n)return e;var t=null===e||void 0===e?void 0:e.data;return null!==e&&void 0!==e&&e.data&&null!==n&&void 0!==n&&n.data?t=qn(e.data+n.data):null!==n&&void 0!==n&&n.data&&(t=qn(n.data)),{__typename:n.__typename,path:n.path,downloadUrl:n.downloadUrl,data:"string"===typeof t?t:null,cursor:n.cursor}},$n=function(e,n){switch(n.type){case"stdout":var t=n.stepKey===e.stepKey?Gn(e.stdout,n.log):n.log;return(0,w.Z)((0,w.Z)({},e),{},{isLoading:!1,stdout:t});case"stderr":var r=n.stepKey===e.stepKey?Gn(e.stderr,n.log):n.log;return(0,w.Z)((0,w.Z)({},e),{},{isLoading:!1,stderr:r});default:return e}},Jn={stepKey:"",stdout:null,stderr:null,isLoading:!0},Qn=(0,p.Ps)(Ke||(Ke=(0,u.Z)(["\n  fragment ComputeLogsSubscriptionFragment on ComputeLogFile {\n    data\n    cursor\n    ...ComputeLogContentFileFragment\n  }\n  ","\n"])),Nn),Wn=(0,p.Ps)(Ue||(Ue=(0,u.Z)(["\n  subscription ComputeLogsSubscription(\n    $runId: ID!\n    $stepKey: String!\n    $ioType: ComputeIOType!\n    $cursor: String\n  ) {\n    computeLogs(runId: $runId, stepKey: $stepKey, ioType: $ioType, cursor: $cursor) {\n      ...ComputeLogsSubscriptionFragment\n    }\n  }\n  ","\n"])),Qn),Bn=l.memo((function(e){var n=e.runId,t=e.stepKeys,r=e.computeLogKey,i=e.ioType,o=e.setComputeLogUrl,s=l.useContext(xn.I).rootServerURI,a=function(e,n){var t=l.useReducer($n,Jn),r=(0,b.Z)(t,2),i=r[0],o=r[1];return(0,d.useSubscription)(Wn,{fetchPolicy:"no-cache",variables:{runId:e,stepKey:n,ioType:A.VJ.STDOUT,cursor:null},skip:!n,onSubscriptionData:function(e){var t,r=e.subscriptionData;n&&o({type:"stdout",stepKey:n,log:(null===(t=r.data)||void 0===t?void 0:t.computeLogs)||null})}}),(0,d.useSubscription)(Wn,{fetchPolicy:"no-cache",variables:{runId:e,stepKey:n,ioType:A.VJ.STDERR,cursor:null},skip:!n,onSubscriptionData:function(e){var t,r=e.subscriptionData;n&&o({type:"stderr",stepKey:n,log:(null===(t=r.data)||void 0===t?void 0:t.computeLogs)||null})}}),i}(n,r),c=a.isLoading,u=a.stdout,p=a.stderr;if(!t.length||!r)return(0,V.jsx)(f.x,{flex:{justifyContent:"center",alignItems:"center"},style:{flex:1,height:"100%"},children:(0,V.jsx)(m.$,{purpose:"section"})});var h=function(e,n){var t,r=null===n||void 0===n?void 0:n.downloadUrl;return r?(t=r)&&t.startsWith("/")?e+r:r:null}(s,"stdout"===i?u:p);return(0,V.jsxs)("div",{style:{flex:1,minHeight:0,display:"flex",flexDirection:"column"},children:[(0,V.jsx)(Vn,{logData:u,isLoading:c,isVisible:"stdout"===i,downloadUrl:h,setComputeLogUrl:o}),(0,V.jsx)(Vn,{logData:p,isLoading:c,isVisible:"stderr"===i,downloadUrl:h,setComputeLogUrl:o})]})})),Vn=function(e){var n=e.isLoading,t=e.isVisible,r=e.logData,i=e.downloadUrl,o=e.setComputeLogUrl;return l.useEffect((function(){o(i)}),[o,i]),(0,V.jsx)(Tn,{logData:r,isLoading:n,isVisible:t,downloadUrl:i})},Hn=t(47427),Yn=t(72844),Xn=t.n(Yn),et=t(99738),nt=t(92497),tt=t(98834),rt={DEBUG:0,INFO:0,WARNING:0,ERROR:0,CRITICAL:0,EVENT:0},it=function(e,n){switch(n.type){case"append":var t=n.queued.map((function(e,n){return(0,w.Z)((0,w.Z)({},e),{},{clientsideKey:"csk".concat(e.timestamp,"-").concat(n)})})),r=[].concat((0,un.Z)(e.nodes),(0,un.Z)(t)),i=(0,w.Z)({},e.counts);return t.forEach((function(e){var n=(0,tt.m)(e);i[n]++})),{nodes:r,counts:i,loading:n.hasMore,cursor:n.cursor};case"set-cursor":return(0,w.Z)((0,w.Z)({},e),{},{cursor:n.cursor});case"reset":return{nodes:[],counts:rt,cursor:null,loading:!0};default:return e}},ot={nodes:[],counts:rt,cursor:null,loading:!0},st=function(e){var n=(0,d.useApolloClient)(),t=l.useRef([]),r=l.useReducer(it,ot),i=(0,b.Z)(r,2),o=i[0],s=i[1],a=l.useCallback((function(t){var r=n.readFragment({fragmentName:"PipelineRunLogsSubscriptionStatusFragment",fragment:dt,id:"Run:".concat(e)});if(r){var i=(0,w.Z)((0,w.Z)({},r),{},{status:t});t!==A.VO.FAILURE&&t!==A.VO.SUCCESS&&t!==A.VO.STARTING&&t!==A.VO.CANCELING&&t!==A.VO.CANCELED||(i.canTerminate=!1),n.writeFragment({fragmentName:"PipelineRunLogsSubscriptionStatusFragment",fragment:dt,id:"Run:".concat(e),data:i})}}),[n,e]);l.useEffect((function(){t.current=[],s({type:"reset"})}),[e]);var c=l.useMemo((function(){return Xn()((function(){if(t.current.length){var e=(0,un.Z)(t.current);t.current=[];var n=e.flatMap((function(e){return e.messages})),r=e[e.length-1],i=r.hasMorePastEvents,o=r.cursor;s({type:"append",queued:n,hasMore:i,cursor:o});var l=function(e){var n,t=(0,un.Z)(e).reverse(),r=(0,Hn.Z)(t);try{for(r.s();!(n=r.n()).done;)switch(n.value.__typename){case"RunStartEvent":return A.VO.STARTED;case"RunEnqueuedEvent":return A.VO.QUEUED;case"RunStartingEvent":return A.VO.STARTING;case"RunCancelingEvent":return A.VO.CANCELING;case"RunCanceledEvent":return A.VO.CANCELED;case"RunSuccessEvent":return A.VO.SUCCESS;case"RunFailureEvent":return A.VO.FAILURE}}catch(i){r.e(i)}finally{r.f()}return null}(n);l&&!i&&a(l)}}),100)}),[a]),u=o.nodes,p=o.counts,h=o.cursor,f=o.loading;return(0,d.useSubscription)(ut,{fetchPolicy:"no-cache",variables:{runId:e,cursor:h},onSubscriptionData:function(e){var n,r=null===(n=e.subscriptionData.data)||void 0===n?void 0:n.pipelineRunLogs;r&&"PipelineRunLogsSubscriptionFailure"!==r.__typename&&(t.current=[].concat((0,un.Z)(t.current),[r]),requestAnimationFrame(c))}}),l.useMemo((function(){return null!==u?{allNodes:u,counts:p,loading:f}:{allNodes:[],counts:p,loading:f}}),[p,f,u])},at=function(e){var n=st(e.runId);return(0,V.jsx)(V.Fragment,{children:e.children(n)})},lt=function(e){var n=e.children,t=e.runId,r=l.useReducer(it,ot),i=(0,b.Z)(r,2),o=i[0],s=i[1],a=o.counts,c=o.cursor,u=o.nodes,p=(0,d.useQuery)(pt,{notifyOnNetworkStatusChange:!0,variables:{runId:t,cursor:c,limit:1e4},pollInterval:5e3,onCompleted:function(e){if(h(),"Run"===(null===e||void 0===e?void 0:e.pipelineRunOrError.__typename)&&"EventConnection"===(null===e||void 0===e?void 0:e.logsForRun.__typename)){var n=e.pipelineRunOrError,t=e.logsForRun.events,r=n.status,i=e.logsForRun.cursor,o=!!r&&r!==A.VO.FAILURE&&r!==A.VO.SUCCESS&&r!==A.VO.CANCELED;s({type:"append",queued:t,hasMore:o,cursor:i}),o&&f(5e3)}}}),h=p.stopPolling,f=p.startPolling;return(0,V.jsx)(V.Fragment,{children:n(null!==u&&u.length>0?{allNodes:u,counts:a,loading:!1}:{allNodes:[],counts:a,loading:!0})})},ct=function(e){var n=e.children,t=e.runId,r=l.useContext(et.DN),i=r.availability,o=r.disabled;return"unavailable"===i||o?(0,V.jsx)(lt,{runId:t,children:n}):"attempting-to-connect"===i?(0,V.jsx)(V.Fragment,{children:n({allNodes:[],counts:rt,loading:!0})}):(0,V.jsx)(at,{runId:t,children:n})},ut=(0,p.Ps)(ze||(ze=(0,u.Z)(["\n  subscription PipelineRunLogsSubscription($runId: ID!, $cursor: String) {\n    pipelineRunLogs(runId: $runId, cursor: $cursor) {\n      __typename\n      ... on PipelineRunLogsSubscriptionSuccess {\n        messages {\n          ... on MessageEvent {\n            runId\n          }\n          ...RunDagsterRunEventFragment\n        }\n        hasMorePastEvents\n        cursor\n      }\n      ... on PipelineRunLogsSubscriptionFailure {\n        missingRunId\n        message\n      }\n    }\n  }\n\n  ","\n"])),nt.O.RunDagsterRunEventFragment),dt=(0,p.Ps)(Me||(Me=(0,u.Z)(["\n  fragment PipelineRunLogsSubscriptionStatusFragment on Run {\n    id\n    runId\n    status\n    canTerminate\n  }\n"]))),pt=(0,p.Ps)(qe||(qe=(0,u.Z)(["\n  query RunLogsQuery($runId: ID!, $cursor: String, $limit: Int) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        runId\n        status\n        canTerminate\n      }\n    }\n    logsForRun(runId: $runId, afterCursor: $cursor, limit: $limit) {\n      ... on EventConnection {\n        events {\n          __typename\n          ... on MessageEvent {\n            runId\n          }\n          ...RunDagsterRunEventFragment\n        }\n        cursor\n      }\n      ... on PythonError {\n        message\n        stack\n      }\n    }\n  }\n  ","\n"])),nt.O.RunDagsterRunEventFragment),ht=t(12244),ft=t(16798),mt=t(42849),gt=t(8412),xt=t(11831),vt=t(9429),yt=t(36172),jt=t(13816),wt=t.n(jt)()((function(){return new Intl.NumberFormat(navigator.language,{compactDisplay:"short",notation:"compact"})})),bt=t(40355),Ct=ee.ZP.div.withConfig({displayName:"ExecutionStateDot",componentId:"sc-1e4maq3-0"})(["display:inline-block;width:11px;height:11px;border-radius:5.5px;transition:background 200ms linear;background:",";&:hover{background:",";}"],(function(e){var n,t=e.state;return(n={},(0,ft.Z)(n,bt.TN.RUNNING,S.w.Gray400),(0,ft.Z)(n,bt.TN.SUCCEEDED,S.w.Green700),(0,ft.Z)(n,bt.TN.SKIPPED,S.w.Yellow500),(0,ft.Z)(n,bt.TN.FAILED,S.w.Red500),(0,ft.Z)(n,bt.TN.PREPARING,S.w.Red500),(0,ft.Z)(n,bt.TN.RETRY_REQUESTED,S.w.Red500),(0,ft.Z)(n,bt.TN.UNKNOWN,S.w.Red500),n)[t]}),(function(e){var n,t=e.state;return(n={},(0,ft.Z)(n,bt.TN.RUNNING,S.w.Gray400),(0,ft.Z)(n,bt.TN.SUCCEEDED,S.w.Green700),(0,ft.Z)(n,bt.TN.SKIPPED,S.w.Yellow500),(0,ft.Z)(n,bt.TN.FAILED,S.w.Red200),(0,ft.Z)(n,bt.TN.PREPARING,S.w.Red500),(0,ft.Z)(n,bt.TN.RETRY_REQUESTED,S.w.Red500),(0,ft.Z)(n,bt.TN.UNKNOWN,S.w.Red500),n)[t]})),kt=t(6527),St=t(40158),Tt=t(74386),Nt=function(e,n){switch(n.type){case"show-popover":return(0,w.Z)((0,w.Z)({},e),{},{shown:!0});case"hide-popover":return(0,w.Z)((0,w.Z)({},e),{},{shown:!1});case"highlight":return(0,w.Z)((0,w.Z)({},e),{},{highlight:n.highlight});case"change-query":return(0,w.Z)((0,w.Z)({},e),{},{shown:!0,highlight:0});case"select-suggestion":return(0,w.Z)((0,w.Z)({},e),{},{highlight:0});default:return e}},It={shown:!1,highlight:0},_t={threshold:.3},Et=function(e){var n=e.value,t=e.onChange,r=e.suggestionProviders,i=l.useReducer(Nt,It),o=(0,b.Z)(i,2),s=o[0],a=o[1],c=s.shown,u=s.highlight,d=l.useRef(null),p=l.useMemo((function(){var e=r.reduce((function(e,n){var t=n.values();return n.token?(0,w.Z)((0,w.Z)({},e),{},(0,ft.Z)({},n.token,{fuse:new St.Z(t,_t),all:t})):e}),{}),n=r.map((function(e){return e.token})).filter((function(e){return e}));return{empty:new St.Z(n,_t),perProvider:e}}),[r]),h=p.empty,f=p.perProvider,m=l.useCallback((function(e){if(!e)return Object.keys(f);var n=e.split(":"),t=(0,b.Z)(n,2),r=t[0],i=t[1];if(r in f){var o=f[r],s=o.fuse,a=o.all,l=i?s.search(i).map((function(e){return"".concat(r,":").concat(e.item)})):a.map((function(e){return"".concat(r,":").concat(e)}));return l.map((function(e){return e.toLowerCase()})).includes(e)?[]:l}return h.search(e).map((function(e){return e.item}))}),[h,f]),g=function(e,n){var t=n.toLocaleLowerCase().trim().split(/\s+/),r=t[t.length-1]||"",i=l.useMemo((function(){return e(r)}),[e,r]),o=l.useCallback((function(e){var t=n.toLocaleLowerCase().lastIndexOf(r);if(-1!==t){var i=n.slice(0,t);return"".concat(i).concat(e)}return n}),[r,n]);return l.useMemo((function(){return{suggestions:i,onSelectSuggestion:o}}),[o,i])}(m,n),x=g.suggestions,v=g.onSelectSuggestion,y=x.length,j=x[u]||null,C=l.useCallback((function(e){a({type:"change-query"}),t(e.target.value)}),[t]),k=l.useCallback((function(e){a({type:"select-suggestion"}),t(v(e))}),[t,v]),S=l.useCallback((function(){var e;a({type:"change-query"}),t(""),null===(e=d.current)||void 0===e||e.focus()}),[t]);return(0,V.jsx)(sn.J,{isOpen:c&&x.length>0,position:"bottom-left",content:(0,V.jsx)(Ot,{children:x.map((function(e,n){return(0,V.jsx)(Rt,{suggestion:e,isHighlight:u===n,onSelect:k},e)}))}),children:(0,V.jsx)(Zt,{placeholder:"Filter\u2026",spellCheck:!1,autoCorrect:"off",value:n,ref:d,onChange:C,onFocus:function(){return a({type:"show-popover"})},onBlur:function(){return a({type:"hide-popover"})},onKeyDown:function(e){var n=e.key;if("Escape"!==n){if(y){var t=y-1;switch(n){case"ArrowUp":e.preventDefault(),a({type:"highlight",highlight:0===u?t:u-1});break;case"ArrowDown":e.preventDefault(),a({type:"highlight",highlight:u===t?0:u+1});break;case"Enter":e.preventDefault(),j&&k(j)}}}else a({type:"hide-popover"})},rightElement:(0,V.jsx)(Tt.C,{onClick:S,children:(0,V.jsx)(q.JO,{name:"cancel"})})})})},Rt=function(e){var n=e.suggestion,t=e.isHighlight,r=e.onSelect,i=l.useRef(null);return l.useEffect((function(){i.current&&t&&i.current.scrollIntoView({block:"nearest"})}),[t]),(0,V.jsx)(Pt,{ref:i,isHighlight:t,onMouseDown:function(e){e.preventDefault(),r(n)},children:n})},Zt=(0,ee.ZP)(je.oi).withConfig({displayName:"LogsFilterInput__FilterInput",componentId:"sc-3dxor8-0"})(["width:300px;"]),Ot=ee.ZP.ul.withConfig({displayName:"LogsFilterInput__Results",componentId:"sc-3dxor8-1"})(["list-style:none;margin:0;max-height:200px;max-width:800px;min-width:300px;overflow-y:auto;padding:4px 0;"]),Pt=ee.ZP.li.withConfig({displayName:"LogsFilterInput__Item",componentId:"sc-3dxor8-2"})(["align-items:center;background-color:",";color:",";cursor:pointer;display:flex;flex-direction:row;font-size:12px;list-style:none;margin:0;padding:4px 8px;white-space:nowrap;text-overflow:ellipsis;&:hover{background-color:",";}"],(function(e){return e.isHighlight?S.w.Blue500:S.w.White}),(function(e){return e.isHighlight?S.w.White:"default"}),(function(e){return e.isHighlight?S.w.Blue500:S.w.Gray100})),Lt=t(1557);!function(e){e.structured="structured",e.stdout="stdout",e.stderr="stderr"}(Ge||(Ge={}));var Ft=function(e){var n=e.steps,t=e.metadata,r=e.counts,i=e.filter,o=e.onSetFilter,s=e.logType,a=e.onSetLogType,c=e.computeLogKey,u=e.onSetComputeLogKey,d=e.computeLogUrl,p=l.useMemo((function(){return new Set([s===Ge.structured?s:Ge.stdout])}),[s]);return(0,V.jsxs)(yt.qn,{children:[(0,V.jsx)(xe.h,{activeItems:p,buttons:[{id:Ge.structured,icon:"list",tooltip:"Structured event logs"},{id:Ge.stdout,icon:"wysiwyg",tooltip:"Raw compute logs"}],onClick:function(e){return a(e)}}),(0,V.jsx)(yt.KC,{}),"structured"===s?(0,V.jsx)(Ut,{counts:r,filter:i,onSetFilter:o,steps:n}):(0,V.jsx)(At,{steps:n,metadata:t,logType:s,onSetLogType:a,computeLogKey:c,onSetComputeLogKey:u,computeLogUrl:d})]})},Dt=function(e,n){return n.stepKeys.some((function(n){return e.steps[n].state===bt.TN.RUNNING}))?bt.TN.RUNNING:n.stepKeys.some((function(n){return e.steps[n].state===bt.TN.SKIPPED}))?bt.TN.SKIPPED:n.stepKeys.every((function(n){return e.steps[n].state===bt.TN.SUCCEEDED}))?bt.TN.SUCCEEDED:bt.TN.FAILED},At=function(e){var n,t,r=e.steps,i=e.metadata,o=e.computeLogKey,s=e.onSetComputeLogKey,a=e.logType,l=e.onSetLogType,c=e.computeLogUrl,u=i.logCaptureSteps||(0,bt.co)(Object.keys(i.steps)),d=o&&u[o],p=function(e){if(!e||!u[e])return null;var n=u[e];return 1===n.stepKeys.length&&e===n.stepKeys[0]?e:n.pid?"pid: ".concat(n.pid," (").concat(n.stepKeys.length," steps)"):"".concat(e," (").concat(n.stepKeys.length," steps)")};return(0,V.jsxs)(f.x,{flex:{justifyContent:"space-between",alignItems:"center",direction:"row"},style:{flex:1},children:[(0,V.jsxs)(bn.Z,{direction:"row",spacing:24,alignItems:"center",children:[(0,V.jsx)(mt.P,{disabled:!r.length,items:Object.keys(u),itemRenderer:function(e,n){return(0,V.jsx)(gt.sN,{onClick:n.handleClick,text:p(e),active:n.modifiers.active},e)},activeItem:o,filterable:!1,onItemSelect:function(e){s(e)},children:(0,V.jsx)(ye.zx,{disabled:!r.length,rightIcon:(0,V.jsx)(q.JO,{name:"expand_more"}),children:p(o)||"Select a step..."})}),d?(0,V.jsxs)(T.mQ,{selectedTabId:a,onChange:l,size:"small",children:[(0,V.jsx)(T.OK,{id:Ge.stdout,title:"stdout"}),(0,V.jsx)(T.OK,{id:Ge.stderr,title:"stderr"})]}):null]}),d?(0,V.jsxs)(f.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[o&&u[o]?Dt(i,u[o])===bt.TN.RUNNING?(0,V.jsx)(m.$,{purpose:"body-text"}):(0,V.jsx)(Ct,{state:Dt(i,u[o])}):null,c?(0,V.jsx)(xt.u,{placement:"top-end",content:o&&1===(null===(n=u[o])||void 0===n?void 0:n.stepKeys.length)?"Download ".concat(null===(t=u[o])||void 0===t?void 0:t.stepKeys[0]," compute logs"):"Download compute logs",children:(0,V.jsx)(Kt,{"aria-label":"Download link",href:c,download:!0,children:(0,V.jsx)(q.JO,{name:"download_for_offline",color:S.w.Gray600})})}):null]}):null]})},Kt=ee.ZP.a.withConfig({displayName:"LogsToolbar__DownloadLink",componentId:"d9cqde-0"})(["border-radius:4px;display:block;text-decoration:none;","{transition:background-color 100ms linear;}:hover ","{background-color:",";}:active ",",:focus ","{background-color:",";}:focus{outline:none;}"],q.a1,q.a1,S.w.Gray800,q.a1,q.a1,S.w.Dark),Ut=function(e){var n,t=e.filter,r=e.counts,i=e.onSetFilter,o=e.steps,s=l.useState("assignment"),a=(0,b.Z)(s,2),c=a[0],u=a[1],d=t.logQuery.map((function(e){var n=e.token,t=e.value;return n?"".concat(n,":").concat(t):t})).join(" "),p=l.useState((function(){return d})),h=(0,b.Z)(p,2),m=h[0],g=h[1],x=(0,vt.m)(),v=(null===(n=t.logQuery.find((function(e){return"step"===e.token})))||void 0===n?void 0:n.value)||null,y=t.logQuery.reduce((function(e,n){return e+n.value}),"");l.useEffect((function(){g(d)}),[d]);return l.useEffect((function(){var e;return"assignment_turned_in"===c&&(e=setTimeout((function(){u("assignment")}),2e3)),function(){e&&clearTimeout(e)}}),[c]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Et,{value:m,suggestionProviders:(0,Lt.m)(o),onChange:function(e){var n=e.split(/\s+/).map((function(e){var n=e.split(":");return n.length>1?{token:n[0],value:n[1]}:{value:n[0]}}));i((0,w.Z)((0,w.Z)({},t),{},{logQuery:n})),g(e)}}),y?(0,V.jsx)(zt,{checked:t.hideNonMatches,onChange:function(e){return i((0,w.Z)((0,w.Z)({},t),{},{hideNonMatches:e.currentTarget.checked}))},label:"Hide non-matches"}):null,(0,V.jsx)(yt.KC,{}),(0,V.jsx)(f.x,{flex:{direction:"row",alignItems:"center",gap:8},children:Object.keys(kt.i).map((function(e){var n,o=t.levels[e];return(0,V.jsxs)(Mt,{$enabled:o,children:[(0,V.jsx)(ve.X,{format:"switch",size:"small",checked:!!o,fillColor:o?S.w.Blue500:S.w.Gray200,onChange:function(){return i((0,w.Z)((0,w.Z)({},t),{},{levels:(0,w.Z)((0,w.Z)({},t.levels),{},(0,ft.Z)({},e,!o))}))}}),(0,V.jsx)(qt,{$enabled:o,children:e.toLowerCase()}),(0,V.jsx)(Gt,{$enabled:o,children:(n=r[e],wt().format(n))})]},e)}))}),v&&(0,V.jsx)(yt.KC,{}),(0,V.jsx)("div",{style:{minWidth:15,flex:1}}),(0,V.jsx)(ye.zx,{icon:(0,V.jsx)(q.JO,{name:c}),onClick:function(){x(window.location.href),u("assignment_turned_in")},children:"Copy URL"})]})},zt=(0,ee.ZP)(ve.X).withConfig({displayName:"LogsToolbar__NonMatchCheckbox",componentId:"d9cqde-1"})(["&&&{margin:0 4px 0 12px;}white-space:nowrap;"]),Mt=ee.ZP.label.withConfig({displayName:"LogsToolbar__FilterLabel",componentId:"d9cqde-2"})(["background-color:",";border:none;border-radius:8px;margin:0;padding:4px 6px;overflow:hidden;cursor:pointer;display:inline-flex;flex-direction:row;align-items:center;font-size:12px;font-weight:500;gap:6px;box-shadow:transparent inset 0px 0px 0px 1px;transition:background 50ms linear;:focus{box-shadow:rgba(58,151,212,0.6) 0 0 0 3px;outline:none;}:focus:not(:focus-visible){box-shadow:transparent inset 0px 0px 0px 1px,rgba(0,0,0,0.12) 0px 2px 12px 0px;}"],(function(e){return e.$enabled?S.w.Blue50:S.w.Gray100})),qt=ee.ZP.span.withConfig({displayName:"LogsToolbar__LogLabel",componentId:"d9cqde-3"})(["color:",";line-height:16px;transition:background 50ms linear;"],(function(e){return e.$enabled?S.w.Blue500:S.w.Gray700})),Gt=ee.ZP.span.withConfig({displayName:"LogsToolbar__LogCount",componentId:"d9cqde-4"})(["background-color:",";border-radius:6px;color:",";font-weight:600;font-family:",";line-height:16px;padding:1px 4px;transition:background 50ms linear;"],(function(e){return e.$enabled?S.w.Blue100:S.w.Gray200}),(function(e){return e.$enabled?S.w.Blue500:S.w.Gray700}),on.b.monospace),$t=t(3148),Jt=t(3660),Qt=t(85358),Wt=t(95550),Bt=t.n(Wt),Vt=t(25429),Ht=function(e){var n=(0,c.k6)(),t=(0,d.useMutation)(D.kO),r=(0,b.Z)(t,1)[0],i=(0,cn._)(e);return l.useCallback(function(){var t=(0,Qt.Z)(Bt().mark((function t(o){var s,a;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.pipelineSnapshotId&&i){t.next=2;break}return t.abrupt("return");case 2:return s=(0,D.kz)({run:e,style:o,repositoryLocationName:i.match.repositoryLocation.name,repositoryName:i.match.repository.name}),t.prev=3,t.next=6,r({variables:s});case 6:a=t.sent,(0,D.lF)(e.pipelineName,a,n,{preserveQuerystring:!0,behavior:"open"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),(0,Vt.t)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),[n,r,i,e])},Yt=t(57615),Xt="|";function er(e){return e.sort().map((function(e){return e.toLowerCase()})).join(Xt)}var nr={steps:"*",logs:"",levels:er(kt.w),hideNonMatches:"true",focusedTime:""},tr=function(e){var n=e.logs.split(Xt),t=e.focusedTime&&!e.logs?Number(e.focusedTime):null,r="true"===e.hideNonMatches,i=(0,Lt.m)();return{sinceTime:0,focusedTime:t,hideNonMatches:r,logQuery:n.map((function(e){return(0,Yt.WD)(e,i)})),levels:e.levels.split(Xt).map((function(e){return e.toUpperCase()})).filter((function(e){return kt.i.hasOwnProperty(e)})).reduce((function(e,n){return(0,w.Z)((0,w.Z)({},e),{},(0,ft.Z)({},n,!0))}),{})}};function rr(e){var n=e.logQuery.map((function(e){return e.token?"".concat(e.token,":").concat(e.value):e.value}));return{hideNonMatches:e.hideNonMatches?"true":"false",focusedTime:e.focusedTime||"",logs:n.join(Xt),levels:er(Object.keys(e.levels).filter((function(n){return!!e.levels[n]})))}}var ir,or,sr,ar,lr,cr,ur,dr,pr,hr,fr,mr,gr,xr,vr,yr,jr,wr,br,Cr,kr=function(e){var n,t=e.run,r=e.runId,i=(0,L.q)({encode:rr,decode:tr,defaults:nr}),o=(0,b.Z)(i,2),s=o[0],a=o[1],c=(0,L.q)({queryKey:"selection",defaults:{selection:""}}),u=(0,b.Z)(c,2),d=u[0],p=u[1];n=t?function(e){switch(e){case A.VO.CANCELED:case A.VO.CANCELING:case A.VO.FAILURE:return"/favicon-run-failed.svg";case A.VO.SUCCESS:return"/favicon-run-success.svg";default:return"/favicon-run-pending.svg"}}(t.status):"/favicon.svg",l.useEffect((function(){var e=document.querySelector('link[rel="icon"][type="image/svg+xml"]');if(e){var t=e.getAttribute("href");return e.setAttribute("href",n),function(){t&&e.setAttribute("href",t)}}}),[n]),(0,v.j)(t?"".concat((0,x.pv)(t.pipelineName)?"":t.pipelineName," ").concat(r.slice(0,8)," [").concat(t.status,"]"):"Run: ".concat(r));var h=function(e,n){var t=n.find((function(n){return"ExecutionStepFailureEvent"===n.__typename&&n.stepKey===e}));t&&(0,pn._)({body:(0,V.jsx)(fn.T9,{error:t})})},f=function(e){p(e),a((0,w.Z)((0,w.Z)({},s),{},{logQuery:"*"!==e?[{token:"query",value:e}]:[]}))};return(0,V.jsx)(Jt.A.Provider,{value:t,children:(0,V.jsx)(ct,{runId:r,children:function(e){return(0,V.jsx)(bt.jp,{logs:e,children:function(n){return(0,V.jsx)(Sr,{run:t,runId:r,logs:e,logsFilter:s,metadata:n,selectionQuery:d,onSetLogsFilter:a,onSetSelectionQuery:f,onShowStateDetails:h})}})}},r)})},Sr=function(e){var n=e.run,t=e.runId,r=e.logs,i=e.logsFilter,o=e.metadata,s=e.selectionQuery,a=e.onSetLogsFilter,c=e.onSetSelectionQuery,u=Ht(n),d=l.createRef(),p=(0,L.q)({queryKey:"logType",defaults:{logType:"structured"}}),h=(0,b.Z)(p,2),m=h[0],g=h[1],x=(0,L.q)({queryKey:"logKey"}),v=(0,b.Z)(x,2),y=v[0],j=v[1],w=function(e){switch(e){case"stdout":return Ge.stdout;case"stderr":return Ge.stderr;default:return Ge.structured}}(m),C=l.useState(null),k=(0,b.Z)(C,2),S=k[0],T=k[1],I=JSON.stringify(Object.keys(o.steps).sort()),_=l.useMemo((function(){return JSON.parse(I)}),[I]),E=(null===n||void 0===n?void 0:n.executionPlan)&&(0,gn.J)(null===n||void 0===n?void 0:n.executionPlan,o.steps),R=l.useMemo((function(){return E&&s&&"*"!==s?(0,hn.V)(E,s).all.map((function(e){return e.name})):[]}),[E,s]);l.useEffect((function(){if(null!==_&&void 0!==_&&_.length&&!y)if(o.logCaptureSteps){var e=Object.keys(o.logCaptureSteps),n=e.find((function(e){return R.every((function(n){return o.logCaptureSteps&&o.logCaptureSteps[e].stepKeys.includes(n)}))}));j(n||e[0])}else _.includes(y)?1===R.length&&y!==R[0]&&j(R[0]):j(1===R.length?R[0]:_[0])}),[_,y,R,o.logCaptureSteps,j]);var Z=E?i.logQuery.filter((function(e){return e.token&&"query"===e.token})).reduce((function(e,n){return[].concat((0,un.Z)(e),(0,un.Z)((0,hn.V)(E,n.value).all.map((function(e){return e.name}))))}),[]):[],O=function(e,n){var t,r=R.indexOf(e),i='"'.concat(e,'"');n.shiftKey?(t=(0,un.Z)(R.map((function(e){return s.includes('"'.concat(e,'"'))?'"'.concat(e,'"'):e}))),-1!==r?t.splice(r,1):t.push(i)):1===R.length&&-1!==r?t=[]:(t=[i],j(e)),c(t.join(", ")||"*")};return(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(dn.OS,{ref:d,axis:"vertical",identifier:"run-gantt",firstInitialPercent:35,firstMinSize:56,first:function(e){return n?"QUEUED"===n.status?(0,V.jsx)(mn.Fu,{run:n}):n.executionPlan&&E?(0,V.jsx)(mn.hj,{options:{mode:mn.hS.WATERFALL_TIMED},toolbarActions:(0,V.jsxs)(f.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,V.jsx)(dn.jo,{axis:"vertical",container:d}),(0,V.jsx)($t.NX,{run:n,onLaunch:u,graph:E,metadata:e,selection:{query:s,keys:R}})]}),runId:t,graph:E,metadata:e,selection:{query:s,keys:R},onClickStep:O,onSetSelection:c,focusedTime:i.focusedTime}):(0,V.jsx)(N.t,{icon:"error",title:"Unable to build execution plan"}):(0,V.jsx)(mn.ZW,{runId:t})}(o),second:(0,V.jsxs)(Tr,{children:[(0,V.jsx)(Ft,{logType:w,onSetLogType:function(e){return g(Ge[e])},filter:i,onSetFilter:a,steps:_,metadata:o,computeLogKey:y,onSetComputeLogKey:function(e){j(e)},computeLogUrl:S,counts:r.counts}),w!==Ge.structured?(0,V.jsx)(Bn,{runId:t,stepKeys:_,computeLogKey:y,ioType:Ge[w],setComputeLogUrl:T}):(0,V.jsx)(ht.S,{logs:r,filter:i,filterStepKeys:Z,filterKey:"".concat(JSON.stringify(i)),metadata:o})]})})})},Tr=ee.ZP.div.withConfig({displayName:"Run__LogsContainer",componentId:"sc-1l2e0ac-0"})(["display:flex;flex-direction:column;height:100%;"]),Nr=t(27457),Ir=t(57876),_r=t(37751),Er=function(){(0,g.Px)();var e=(0,c.UO)().runId,n=(0,d.useQuery)(Zr,{fetchPolicy:"cache-and-network",partialRefetch:!0,variables:{runId:e}}),t=n.data,r=n.loading,i="Run"===(null===t||void 0===t?void 0:t.pipelineRunOrError.__typename)?t.pipelineRunOrError:null,o=null===i||void 0===i?void 0:i.pipelineSnapshotId,s=(0,cn._)(i),a=null!==s&&void 0!==s&&s.match?(0,K.k)(s.match.repository.name,s.match.repositoryLocation.name):null,u=l.useMemo((function(){return!!(i&&s&&(0,Xe.E8)(s.match,i.pipelineName))}),[i,s]);return(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%",overflow:"hidden"},children:[(0,V.jsx)(f.x,{flex:{direction:"row",alignItems:"flex-start"},style:{position:"relative",zIndex:1},children:(0,V.jsx)(Ve.m,{title:(0,V.jsx)(M.X6,{style:{fontFamily:on.b.monospace,fontSize:"20px"},children:e.slice(0,8)}),tags:i?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(_r.K,{status:i.status}),(0,x.pv)(i.pipelineName)?(0,V.jsx)(Nr.k,{assetKeys:(0,D.Bo)(i),clickableTags:!0}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(C.V,{icon:"run",children:["Run of"," ",(0,V.jsx)(W.h,{pipelineName:null===i||void 0===i?void 0:i.pipelineName,pipelineHrefContext:a||"repo-unknown",snapshotId:o,size:"small",isJob:u})]}),(0,V.jsx)(Nr.k,{assetKeys:i.assets.map((function(e){return e.key})),clickableTags:!0})]}),(0,V.jsxs)(f.x,{flex:{direction:"row",alignItems:"flex-start",gap:12,wrap:"wrap"},children:[null!==i&&void 0!==i&&i.startTime?(0,V.jsx)(sn.J,{interactionKind:"hover",placement:"bottom",content:(0,V.jsx)(f.x,{padding:16,children:(0,V.jsx)(Ir.lc,{run:i,loading:r})}),children:(0,V.jsx)(C.V,{icon:"schedule",children:(0,V.jsx)(ln.v,{timestamp:i.startTime,timeFormat:{showSeconds:!0,showTimezone:!1}})})}):i.updateTime?(0,V.jsx)(C.V,{icon:"schedule",children:(0,V.jsx)(ln.v,{timestamp:i.updateTime,timeFormat:{showSeconds:!0,showTimezone:!1}})}):void 0,null!==i&&void 0!==i&&i.startTime&&null!==i&&void 0!==i&&i.endTime?(0,V.jsx)(sn.J,{interactionKind:"hover",placement:"bottom",content:(0,V.jsx)(f.x,{padding:16,children:(0,V.jsx)(Ir.lc,{run:i,loading:r})}),children:(0,V.jsx)(C.V,{icon:"timer",children:(0,V.jsx)("span",{style:{fontVariantNumeric:"tabular-nums"},children:null!==i&&void 0!==i&&i.startTime?(0,an.fv)((1e3*(null===i||void 0===i?void 0:i.endTime)||Date.now())-1e3*(null===i||void 0===i?void 0:i.startTime)):"\u2013"})})}):null]})]}):null,right:i?(0,V.jsx)(Ir.Up,{run:i,isJob:u}):null})}),(0,V.jsx)(Rr,{data:t,runId:e})]})},Rr=function(e){var n=e.data,t=e.runId;return n&&n.pipelineRunOrError?"Run"!==n.pipelineRunOrError.__typename?(0,V.jsx)(f.x,{padding:{vertical:64},children:(0,V.jsx)(N.t,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})}):(0,V.jsx)(kr,{run:n.pipelineRunOrError,runId:t}):(0,V.jsx)(kr,{run:void 0,runId:t})},Zr=(0,p.Ps)(ir||(ir=(0,u.Z)(["\n  query RunRootQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      __typename\n      ... on Run {\n        id\n        ...RunFragment\n      }\n    }\n  }\n\n  ","\n"])),nt.O.RunFragment),Or=t(47387),Pr=t(90428),Lr=t.n(Pr),Fr=function(){var e=(0,d.useQuery)(Dr).data;return!(null===e||void 0===e||!e.instance.hasInfo)},Dr=(0,p.Ps)(or||(or=(0,u.Z)(["\n  query InstanceConfigHasInfo {\n    instance {\n      hasInfo\n    }\n  }\n"]))),Ar=t(50741),Kr=t(62278),Ur=t(78042),zr=t(81403),Mr=t(89324),qr=t(24375),Gr=function(){var e=(0,d.useQuery)($r,{fetchPolicy:"cache-and-network",partialRefetch:!0,notifyOnNetworkStatusChange:!0});return(0,R.C4)(e,R.dT),(0,V.jsx)(Ar.g,{queryResult:e,children:function(e){var n=e.repositoriesOrError,t=e.instance;if("PythonError"===n.__typename){var r=n.message;return(0,V.jsx)(I.b,{intent:"warning",title:(0,V.jsxs)(bn.Z,{direction:"row",spacing:4,children:[(0,V.jsx)("div",{children:"Could not load scheduled ticks."}),(0,V.jsx)(_.Z,{color:S.w.Link,underline:"always",onClick:function(){(0,pn._)({title:"Python error",body:r})},children:"View error"})]})})}return(0,V.jsxs)("div",{children:[(0,V.jsx)(f.x,{padding:{horizontal:24,vertical:16},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,V.jsx)(Mr.K,{daemonHealth:t.daemonHealth})}),(0,V.jsx)(qr.n,{repos:n.nodes})]})}})},$r=(0,p.Ps)(sr||(sr=(0,u.Z)(["\n  query SchedulerInfoQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n    repositoriesOrError {\n      ... on RepositoryConnection {\n        nodes {\n          __typename\n          id\n          ... on Repository {\n            ...RepositorySchedulesFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ","\n  ","\n  ","\n"])),Ur.O,zr.dM,fn.Bq),Jr=t(34653),Qr=t(80608),Wr=t(45302),Br=t(77892),Vr=function(){var e,n,t,r,i,o;(0,g.Px)(),(0,v.j)("Runs");var s=(0,Wr.oD)(),a=(0,b.Z)(s,2),c=a[0],u=a[1],d=(0,Wr.VH)(c),p=l.useState(!1),m=(0,b.Z)(p,2),x=m[0],y=m[1],j=Fr(),k=(0,Br.l)({nextCursorForResult:function(e){var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[24])||void 0===n?void 0:n.runId},getResultArray:function(e){return e&&"Runs"===e.pipelineRunsOrError.__typename?e.pipelineRunsOrError.results:[]},variables:{filter:d,queuedFilter:(0,w.Z)((0,w.Z)({},d),{},{statuses:Array.from(Jr.sy)}),inProgressFilter:(0,w.Z)((0,w.Z)({},d),{},{statuses:Array.from(Jr.Ys)})},query:Yr,pageSize:25}),_=k.queryResult,Z=k.paginationProps,O=(0,R.C4)(_,R.dT),P=x?"scheduled":function(e){var n=new Set(e.filter((function(e){return"status"===e.token})).map((function(e){return e.value})));return Lr()(Jr.sy,n)?"queued":Lr()(Jr.Ys,n)?"in-progress":Lr()(Jr.cv,n)?"done":"all"}(c),L="all"!==P,F=function(e){var n=c.filter((function(e){return"status"!==e.token})),t=e.map((function(e){return{token:"status",value:e}}));u([].concat((0,un.Z)(t),(0,un.Z)(n))),y(!1)},A=l.useCallback((function(e){if(L){var n=c.filter((function(e){return"status"===e.token}));u([].concat((0,un.Z)(n),(0,un.Z)(e)))}else u(e)}),[c,u,L]),K=l.useCallback((function(e){var n=(0,Yt.HY)(e);c.some((function(e){return(0,Yt.HY)(e)===n}))||A([].concat((0,un.Z)(c),[e]))}),[c,A]),U=l.useMemo((function(){var e=["tag","snapshotId","id","job","pipeline"];return L||e.push("status"),e}),[L]),z=l.useMemo((function(){return L?c.filter((function(e){return"status"!==e.token})):c}),[c,L]);return(0,V.jsxs)(h.T,{children:[(0,V.jsx)(Ve.m,{title:(0,V.jsx)(M.X6,{children:"Runs"}),tabs:(0,V.jsxs)(f.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,V.jsxs)(T.mQ,{selectedTabId:P,id:"run-tabs",children:[(0,V.jsx)(T.OK,{title:"All runs",onClick:function(){return F([])},id:"all"}),(0,V.jsx)(T.OK,{title:"Queued",count:"Runs"===(null===(e=_.data)||void 0===e||null===(n=e.queuedCount)||void 0===n?void 0:n.__typename)?null===(t=_.data)||void 0===t?void 0:t.queuedCount.count:"indeterminate",onClick:function(){return F(Array.from(Jr.sy))},id:"queued"}),(0,V.jsx)(T.OK,{title:"In progress",count:"Runs"===(null===(r=_.data)||void 0===r||null===(i=r.inProgressCount)||void 0===i?void 0:i.__typename)?null===(o=_.data)||void 0===o?void 0:o.inProgressCount.count:"indeterminate",onClick:function(){return F(Array.from(Jr.Ys))},id:"in-progress"}),(0,V.jsx)(T.OK,{title:"Done",onClick:function(){return F(Array.from(Jr.cv))},id:"done"}),(0,V.jsx)(T.OK,{title:"Scheduled",onClick:function(){return y(!0)},id:"scheduled"})]}),(0,V.jsx)(f.x,{padding:{bottom:8},children:(0,V.jsx)(R.xi,{refreshState:O})})]})}),"queued"===P&&j?(0,V.jsxs)(f.x,{flex:{direction:"column",gap:8},padding:{horizontal:24,vertical:16},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:[(0,V.jsx)(I.b,{intent:"info",title:(0,V.jsx)(E.rU,{to:"/instance/config#run_coordinator",children:"View queue configuration"})}),(0,V.jsx)(Xr,{})]}):null,(0,V.jsx)(D.Lw.Provider,{value:{refetch:_.refetch},children:(0,V.jsx)(Ar.g,{queryResult:_,allowStaleData:!0,renderError:function(e){var n=!(null===e||void 0===e||!e.networkError||!("statusCode"in e.networkError)||400!==e.networkError.statusCode);return(0,V.jsxs)(f.x,{flex:{direction:"column",gap:32},padding:{vertical:8,left:24,right:12},children:[(0,V.jsx)(Wr.nr,{tokens:z,onChange:A,loading:_.loading,enabledFilters:U}),(0,V.jsx)(N.t,{icon:"warning",title:n?"Invalid run filters":"Unexpected error",description:n?"The specified run filters are not valid. Please check the filters and try again.":"An unexpected error occurred. Check the console for details."})]})},children:function(e){var n=e.pipelineRunsOrError;return"Runs"!==n.__typename?(0,V.jsx)(f.x,{padding:{vertical:64},children:(0,V.jsx)(N.t,{icon:"error",title:"Query Error",description:n.message})}):x?(0,V.jsx)(Gr,{}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Kr.Y,{$top:0,children:(0,V.jsx)(Qr.A,{runs:n.results.slice(0,25),onAddTag:K,filter:d,actionBarComponents:x?null:(0,V.jsxs)(f.x,{flex:{direction:"column",gap:8},children:["all"!==P?(0,V.jsx)(f.x,{flex:{direction:"row",gap:8},children:c.filter((function(e){return"status"===e.token})).map((function(e){var n=e.token,t=e.value;return(0,V.jsx)(C.V,{children:"".concat(n,":").concat(t)},n)}))}):null,(0,V.jsx)(Wr.nr,{tokens:z,onChange:A,loading:_.loading,enabledFilters:U})]})})}),n.results.length>0?(0,V.jsx)("div",{style:{marginTop:"16px"},children:(0,V.jsx)(Or.pI,(0,w.Z)({},Z))}):null]})}})})]})},Hr=(0,p.Ps)(ar||(ar=(0,u.Z)(["\n  fragment CountFragment on Runs {\n    count\n  }\n"]))),Yr=(0,p.Ps)(lr||(lr=(0,u.Z)(["\n  query RunsRootQuery(\n    $limit: Int\n    $cursor: String\n    $filter: RunsFilter!\n    $queuedFilter: RunsFilter!\n    $inProgressFilter: RunsFilter!\n  ) {\n    pipelineRunsOrError(limit: $limit, cursor: $cursor, filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...RunTableRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n    queuedCount: pipelineRunsOrError(filter: $queuedFilter) {\n      ...CountFragment\n    }\n    inProgressCount: pipelineRunsOrError(filter: $inProgressFilter) {\n      ...CountFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"])),Qr.Z,Hr,fn.Bq),Xr=function(){var e=(0,d.useQuery)(ei).data,n=null===e||void 0===e?void 0:e.instance.daemonHealth.daemonStatus;return null===n||void 0===n||!n.required||null!==n&&void 0!==n&&n.healthy?null:(0,V.jsx)(I.b,{intent:"warning",title:"The queued run coordinator is not healthy.",description:(0,V.jsxs)("div",{children:["View ",(0,V.jsx)(E.rU,{to:"/instance/health",children:"Instance status"})," for details."]})})},ei=(0,p.Ps)(cr||(cr=(0,u.Z)(['\n  query QueueDaemonStatusQuery {\n    instance {\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "QUEUED_RUN_COORDINATOR") {\n          id\n          daemonType\n          healthy\n          required\n        }\n      }\n    }\n  }\n']))),ni=t(87535),ti=t(33247),ri=t(37286),ii=(0,p.Ps)(ur||(ur=(0,u.Z)(["\n  query SnapshotQuery($snapshotId: String!) {\n    pipelineSnapshotOrError(snapshotId: $snapshotId) {\n      ... on PipelineSnapshot {\n        id\n        parentSnapshotId\n      }\n    }\n  }\n"]))),oi=function(e){var n,t=e.activeTab,r=void 0===t?"":t,i=e.explorerPath,o=i.pipelineName,s=i.snapshotId,a=void 0===s?"":s,l=(0,nn.gY)((0,w.Z)((0,w.Z)({},i),{},{opNames:[]})),c=(0,Xe.Nc)(o),u=!(null===c||void 0===c||!c.isJob),p=null===c||void 0===c?void 0:c.pipelineSnapshotId,h=(0,d.useQuery)(ii,{variables:{snapshotId:a}}),f=h.data,m=h.loading,g=[{text:"Definition",pathComponent:"",href:"/instance/snapshots/".concat(l)},{text:"Runs",pathComponent:"runs",href:"/instance/snapshots/".concat(l,"runs")}];return(0,V.jsx)(Ve.m,{title:(0,V.jsx)(M.X6,{style:{fontFamily:on.b.monospace,fontSize:"20px"},children:null===(n=i.snapshotId)||void 0===n?void 0:n.slice(0,8)}),tags:(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(C.V,{icon:"schema",children:["Snapshot of"," ",(0,V.jsx)(E.rU,{to:(0,U.r4)(i.pipelineName,u),children:i.pipelineName})]}),function(){var e;return m?(0,V.jsx)(C.V,{intent:"none",minimal:!0,children:"..."}):!p||p!==a&&"PipelineSnapshot"===(null===f||void 0===f?void 0:f.pipelineSnapshotOrError.__typename)&&(null===f||void 0===f||null===(e=f.pipelineSnapshotOrError)||void 0===e?void 0:e.parentSnapshotId)!==p?(0,V.jsx)(C.V,{intent:"warning",minimal:!0,children:"Snapshot"}):(0,V.jsx)(C.V,{intent:"success",minimal:!0,children:"Current"})}()]}),tabs:(0,V.jsx)(T.mQ,{selectedTabId:r,children:g.map((function(e){var n=e.href,t=e.text,r=e.pathComponent;return(0,V.jsx)(ri.f,{id:r,title:t,to:n},t)}))})})},si=function(){var e=(0,c.UO)(),n=e.pipelinePath,t=e.tab,r=(0,nn.p3)(n);return(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%"},children:[(0,V.jsx)(oi,{activeTab:t,explorerPath:r}),(0,V.jsxs)(c.rs,{children:[(0,V.jsx)(c.AW,{path:"/instance/snapshots/:pipelinePath/runs",children:(0,V.jsx)(ti.G,{})}),(0,V.jsx)(c.AW,{path:"/instance/snapshots/(/?.*)",children:(0,V.jsx)(ni.CY,{})})]})]})},ai=t(2789),li=l.createContext({healthTitle:"Daemons"}),ci=function(e){var n=l.useContext(li).healthTitle,t=e.refreshState,r=e.tab,i=Fr();return(0,V.jsxs)(f.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,V.jsxs)(T.mQ,{selectedTabId:r,children:[(0,V.jsx)(ri.f,{id:"overview",title:"Overview",to:"/instance/overview"}),(0,V.jsx)(ri.f,{id:"health",title:n,to:"/instance/health"}),(0,V.jsx)(ri.f,{id:"schedules",title:"Schedules",to:"/instance/schedules"}),(0,V.jsx)(ri.f,{id:"sensors",title:"Sensors",to:"/instance/sensors"}),(0,V.jsx)(ri.f,{id:"backfills",title:"Backfills",to:"/instance/backfills"}),i?(0,V.jsx)(ri.f,{id:"config",title:"Configuration",to:"/instance/config"}):null]}),t?(0,V.jsx)(f.x,{padding:{bottom:8},children:(0,V.jsx)(R.xi,{refreshState:t})}):null]})},ui=function(){(0,g.Px)();var e=(0,d.useQuery)(di),n=(0,Br.l)({query:pi,variables:{},pageSize:25,nextCursorForResult:function(e){var n;return"PartitionBackfills"===e.partitionBackfillsOrError.__typename?null===(n=e.partitionBackfillsOrError.results[24])||void 0===n?void 0:n.backfillId:void 0},getResultArray:function(e){return"PartitionBackfills"===(null===e||void 0===e?void 0:e.partitionBackfillsOrError.__typename)?e.partitionBackfillsOrError.results:[]}}),t=n.queryResult,r=n.paginationProps,i=(0,R.C4)(t,R.dT);return(0,v.j)("Backfills"),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Ve.m,{title:(0,V.jsx)(M.X6,{children:"Instance status"}),tabs:(0,V.jsx)(ci,{tab:"backfills",refreshState:i})}),(0,V.jsx)(Ar.g,{queryResult:t,allowStaleData:!0,children:function(n){var i,o=n.partitionBackfillsOrError;if("PythonError"===o.__typename)return(0,V.jsx)(fn.T9,{error:o});if(!o.results.length)return(0,V.jsx)(f.x,{padding:{vertical:64},children:(0,V.jsx)(N.t,{icon:"no-results",title:"No backfills found",description:(0,V.jsx)("p",{children:"This instance does not have any backfill jobs."})})});var s=((null===(i=e.data)||void 0===i?void 0:i.instance.daemonHealth.allDaemonStatuses)||[]).filter((function(e){return"BACKFILL"===e.daemonType})).map((function(e){return e.required&&e.healthy})),a=s.length&&s.every((function(e){return e}));return(0,V.jsxs)("div",{children:[a?null:(0,V.jsx)(f.x,{padding:{horizontal:24,vertical:16},children:(0,V.jsx)(I.b,{intent:"warning",title:"The backfill daemon is not running.",description:(0,V.jsxs)("div",{children:["See the"," ",(0,V.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}),(0,V.jsx)(ai.G,{backfills:o.results.slice(0,25),refetch:t.refetch}),o.results.length>0?(0,V.jsx)("div",{style:{marginTop:"16px"},children:(0,V.jsx)(Or.b$,(0,w.Z)({},r))}):null]})}})]})},di=(0,p.Ps)(dr||(dr=(0,u.Z)(["\n  query InstanceHealthForBackfillsQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n"])),Ur.O),pi=(0,p.Ps)(pr||(pr=(0,u.Z)(["\n  query InstanceBackfillsQuery($cursor: String, $limit: Int) {\n    partitionBackfillsOrError(cursor: $cursor, limit: $limit) {\n      ... on PartitionBackfills {\n        results {\n          backfillId\n          status\n          backfillStatus\n          numRequested\n          partitionNames\n          numPartitions\n          partitionRunStats {\n            numQueued\n            numInProgress\n            numSucceeded\n            numFailed\n            numPartitionsWithRuns\n            numTotalRuns\n          }\n          unfinishedRuns {\n            id\n            canTerminate\n          }\n          timestamp\n          partitionSetName\n          partitionSet {\n            id\n            name\n            mode\n            pipelineName\n            repositoryOrigin {\n              id\n              repositoryName\n              repositoryLocationName\n            }\n          }\n          error {\n            ...PythonErrorFragment\n          }\n\n          ...BackfillTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),fn.Bq,ai.b),hi=(t(81452),t(24818)),fi=(0,ee.vJ)(hr||(hr=(0,u.Z)(["\n  .react-codemirror2 .CodeMirror.cm-s-instance-config {\n    box-shadow: 0 1px 0 ",";\n    height: 100%;\n  }\n\n  .react-codemirror2 .CodeMirror.cm-s-instance-config {\n    .config-highlight {\n      background-color: ",";\n    }\n"])),S.w.KeylineGray,S.w.Yellow200),mi=l.memo((function(){(0,g.Px)();var e=(0,d.useQuery)(gi,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),n=(0,R.C4)(e,R.dT),t=e.data,r=null===t||void 0===t?void 0:t.instance.info;return t?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(fi,{}),(0,V.jsx)(Ve.m,{title:(0,V.jsx)(M.X6,{children:"Instance status"}),tabs:(0,V.jsx)(ci,{tab:"config",refreshState:n})}),(0,V.jsx)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,V.jsxs)(M.pm,{children:["Dagster version: ",(0,V.jsx)(M.EK,{style:{fontSize:"16px"},children:t.version})]})}),(0,V.jsx)(hi.NU,{editorDidMount:function(e){var n=document.location.hash;if(n){var t=new RegExp("^".concat(n.slice(1),":")),r=e.getSearchCursor(t);r.findNext()&&(e.markText(r.from(),r.to(),{className:"config-highlight"}),e.scrollIntoView(r.from()))}},value:r||"",options:{lineNumbers:!0,mode:"yaml"},theme:["instance-config"]})]}):(0,V.jsx)(f.x,{padding:{vertical:64},children:(0,V.jsx)(m.$,{purpose:"section"})})})),gi=(0,p.Ps)(fr||(fr=(0,u.Z)(["\n  query InstanceConfigQuery {\n    version\n    instance {\n      info\n    }\n  }\n"]))),xi=t(9405),vi=function(){(0,g.Px)();var e=(0,d.useQuery)(yi,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),n=(0,R.C4)(e,R.dT),t=e.loading,r=e.data;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Ve.m,{title:(0,V.jsx)(M.X6,{children:"Instance status"}),tabs:(0,V.jsx)(ci,{tab:"health",refreshState:n})}),(0,V.jsx)(f.x,{padding:{vertical:16,horizontal:24},children:(0,V.jsx)(M.pm,{children:"Daemon statuses"})}),!t||null!==r&&void 0!==r&&r.instance?null!==r&&void 0!==r&&r.instance?(0,V.jsx)(xi.W,{daemonStatuses:r.instance.daemonHealth.allDaemonStatuses}):null:(0,V.jsx)(f.x,{padding:{horizontal:24},style:{color:S.w.Gray400},children:"Loading\u2026"})]})},yi=(0,p.Ps)(mr||(mr=(0,u.Z)(["\n  query InstanceHealthQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n"])),Ur.O),ji=t(55113),wi=t(26533),bi=t(53857),Ci=t(59549),ki={QUEUED:S.w.Blue500,NOT_STARTED:S.w.Blue500,STARTING:S.w.Blue500,MANAGED:S.w.Blue500,STARTED:S.w.Blue500,SUCCESS:S.w.Green500,FAILURE:S.w.Red500,CANCELING:S.w.Red500,CANCELED:S.w.Red500},Si=function(e){var n=e.status,t=e.opacity,r=void 0===t?1:t,i=ki[n];return(0,V.jsx)(Zi,{$color:i,$opacity:r})},Ti=function(e){var n=e.fade,t=e.runs,r=t.length,i=.8/Math.max(3,r);return(0,V.jsx)(f.x,{flex:{direction:"row",alignItems:"center",gap:2},children:t.map((function(t,o){return(0,V.jsx)(sn.J,{position:"bottom",interactionKind:"hover",content:(0,V.jsx)("div",{children:(0,V.jsx)(Ni,{run:t,repoAddr:e.repoAddress})}),hoverOpenDelay:100,children:(0,V.jsx)(Si,{runId:t.runId,status:t.status,opacity:n?1-(r-o-1)*i:1},t.runId)},t.runId)}))})},Ni=function(e){return(0,V.jsxs)(Ii,{children:[(0,V.jsx)(Ei,{children:e.repoAddr}),(0,V.jsxs)(Ri,{children:[(0,V.jsx)(Ci.K9,{status:e.run.status}),(0,V.jsx)(E.rU,{to:"/instance/runs/".concat(e.run.runId),children:(0,V.jsx)(M.fv,{children:(0,D.EI)(e.run)})}),(0,V.jsx)(_i,{}),(0,V.jsxs)(f.x,{flex:{direction:"column"},children:[(0,V.jsx)(D.Zr,{run:e.run}),(0,V.jsx)(D.Tw,{run:e.run})]})]})]})},Ii=ee.ZP.div.withConfig({displayName:"RunStatusPez__OverlayContainer",componentId:"sc-1eclpuq-0"})(["padding:4px;font-size:12px;width:280px;"]),_i=ee.ZP.div.withConfig({displayName:"RunStatusPez__HorizontalSpace",componentId:"sc-1eclpuq-1"})(["flex:1;"]),Ei=(0,ee.ZP)(bi.M$).withConfig({displayName:"RunStatusPez__OverlayTitle",componentId:"sc-1eclpuq-2"})(["padding:8px;box-shadow:inset 0 -1px ",";max-width:100%;text-overflow:ellipsis;overflow:hidden;min-width:0px;"],S.w.KeylineGray),Ri=ee.ZP.div.withConfig({displayName:"RunStatusPez__RunRow",componentId:"sc-1eclpuq-3"})(["align-items:baseline;padding:8px;font-family:",";font-size:14px;line-height:20px;display:flex;gap:8px;"],on.b.monospace),Zi=ee.ZP.div.withConfig({displayName:"RunStatusPez__Pez",componentId:"sc-1eclpuq-4"})(["background-color:",";border-radius:2px;height:16px;opacity:",";width:8px;"],(function(e){return e.$color}),(function(e){return e.$opacity})),Oi=t(37971),Pi=t(7489),Li={showTimezone:!0,showSeconds:!0},Fi=function(e){var n=e.schedules,t=l.useMemo((function(){return n.map((function(e){var n=e.executionTimezone,t=e.futureTicks;return e.scheduleState.status===A.yn.RUNNING?{executionTimezone:n,earliest:Math.min.apply(Math,(0,un.Z)(t.results.map((function(e){return e.timestamp}))))}:null})).reduce((function(e,n){return!e||null!==n&&void 0!==n&&n.earliest&&n.earliest<(null===e||void 0===e?void 0:e.earliest)?n:e}),null)}),[n]);return t?(0,V.jsxs)(M.aU,{color:S.w.Gray500,children:["Next tick:"," ",(0,V.jsx)(ln.v,{timestamp:t.earliest,timezone:t.executionTimezone,timeFormat:Li})]}):null},Di=(0,p.Ps)(gr||(gr=(0,u.Z)(["\n  fragment ScheduleFutureTicksFragment on Schedule {\n    id\n    executionTimezone\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(limit: 10) {\n      results {\n        timestamp\n      }\n    }\n  }\n"]))),Ai=t(33902),Ki=t(32460),Ui=function(e,n){return!(e.end<n.start||n.end<e.start)},zi=function(e,n){return"".concat(n,"-").concat((0,Ai.l)(e))},Mi=function(e){var n=e.range,t=e.jobs,r=e.hourWindow,i=(0,b.Z)(n,2),o=i[0],s=i[1],a=l.useState([]),c=(0,b.Z)(a,2),u=c[0],p=c[1],h=l.useState(),f=(0,b.Z)(h,2),m=f[0],g=f[1],x=(0,d.useQuery)(ao,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{inProgressFilter:{statuses:[A.VO.CANCELING,A.VO.STARTED],createdBefore:s/1e3},terminatedFilter:{statuses:Array.from(Jr.cv),createdBefore:s/1e3,updatedAfter:o/1e3}}}),v=x.data,y=x.loading,j=l.useMemo((function(){return t.reduce((function(e,n){return(0,w.Z)((0,w.Z)({},e),{},(0,ft.Z)({},n.key,n))}),{})}),[t]);return l.useEffect((function(){if(!y){var e=v||{},n=e.unterminated,t=e.terminated,i=e.workspaceOrError,a={},l=Date.now();[].concat((0,un.Z)("Runs"===(null===n||void 0===n?void 0:n.__typename)?n.results:[]),(0,un.Z)("Runs"===(null===t||void 0===t?void 0:t.__typename)?t.results:[])).forEach((function(e){e.startTime&&Ui({start:o,end:s},{start:1e3*e.startTime,end:e.endTime?1e3*e.endTime:l})&&(a[e.pipelineName]=[].concat((0,un.Z)(a[e.pipelineName]||[]),[{id:e.id,status:e.status,startTime:1e3*e.startTime,endTime:e.endTime?1e3*e.endTime:l}]))}));var c=[];if(i&&"Workspace"===i.__typename){var u,d=(0,Hn.Z)(i.locationEntries);try{for(d.s();!(u=d.n()).done;){var h,f=u.value;if("WorkspaceLocationEntry"===f.__typename&&"RepositoryLocation"===(null===(h=f.locationOrLoadError)||void 0===h?void 0:h.__typename)){var m,x=(0,Hn.Z)(f.locationOrLoadError.repositories);try{for(x.s();!(m=x.n()).done;){var b,C=m.value,k=(0,K.k)(C.name,f.locationOrLoadError.name),S=(0,Hn.Z)(C.pipelines);try{var T=function(){var e=b.value,n=zi(k,e.name);if(!(n in j))return"continue";var t,r=(C.schedules||[]).filter((function(n){return n.pipelineName===e.name})),i=[],l=(0,Hn.Z)(r);try{var u=function(){var e=t.value;e.scheduleState.status===A.yn.RUNNING&&e.futureTicks.results.forEach((function(n){var t=n.timestamp,r=1e3*t;Ui({start:o,end:s},{start:r,end:r})&&i.push({id:"".concat(e.pipelineName,"-future-run-").concat(t),status:"SCHEDULED",startTime:r,endTime:r+1e4})}))};for(l.s();!(t=l.n()).done;)u()}catch(p){l.e(p)}finally{l.f()}var d=a[e.name]||[];(i.length||d.length)&&c.push({key:n,jobName:e.name,path:(0,U.jT)({repoName:k.name,repoLocation:k.location,pipelineName:e.name,isJob:e.isJob}),runs:[].concat((0,un.Z)(d),i)})};for(S.s();!(b=S.n()).done;)T()}catch(I){S.e(I)}finally{S.f()}}}catch(I){x.e(I)}finally{x.f()}}}}catch(I){d.e(I)}finally{d.f()}}var N=c.reduce((function(e,n){var t=n.runs.map((function(e){return e.startTime}));return(0,w.Z)((0,w.Z)({},e),{},(0,ft.Z)({},n.key,Math.min.apply(Math,(0,un.Z)(t))))}),{});p(c.sort((function(e,n){return N[e.key]-N[n.key]}))),g(r)}}),[v,o,s,y,j,r]),y&&r!==m?(0,V.jsx)(Ar.T,{purpose:"section"}):(0,V.jsx)(qi,{range:[o,s],jobs:u})},qi=function(e){var n=e.jobs,t=e.range,r=l.useState(null),i=(0,b.Z)(r,2),o=i[0],s=i[1],a=l.useRef(null),c=l.useCallback((function(e){var n;e?(a.current=new ResizeObserver((function(e){var n=e[0];s(n.contentRect.width)})),a.current.observe(e)):null===(n=a.current)||void 0===n||n.disconnect()}),[]),u=24*(n.length||1);return(0,V.jsx)(Xi,{$height:36+u,ref:c,children:o?n.length?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Gi,{interval:36e5,range:t,height:u}),(0,V.jsx)("div",{children:n.map((function(e,n){return(0,V.jsx)(Hi,{job:e,top:24*n+36,range:t,width:o},e.key)}))})]}):(0,V.jsx)(Yi,{}):null})},Gi=function(e){var n=e.interval,t=e.range,r=e.height,i=(0,b.Z)(t,2),o=i[0],s=i[1],a=navigator.language,c=l.useContext(Oi.j),u=(0,b.Z)(c,1)[0],d=l.useMemo((function(){var e=s-o,t=o-o%n,r=Math.ceil(e/n)+1;return(0,un.Z)(new Array(r)).map((function(r,i){var s=t+i*n,l=new Date(s);return{label:l.toLocaleString(a,{hour:"2-digit",timeZone:"Automatic"===u?(0,Pi.cw)():u}),key:l.toString(),left:(s-o)/e*100}})).filter((function(e){return e.left>0}))}),[s,o,n,a,u]),p=Date.now(),h="".concat(((p-o)/(s-o)*100).toPrecision(3),"%");return(0,V.jsxs)($i,{style:{height:"".concat(r,"px")},children:[(0,V.jsx)(Ji,{children:d.map((function(e){return(0,V.jsx)(Qi,{style:{left:"".concat(e.left.toPrecision(3),"%")},children:e.label},e.key)}))}),(0,V.jsxs)(Wi,{children:[d.map((function(e){return(0,V.jsx)(Bi,{style:{left:"".concat(e.left.toPrecision(3),"%")}},e.key)})),p>=o&&p<=s?(0,V.jsx)(Bi,{style:{left:h,backgroundColor:S.w.Blue500,zIndex:1}}):null]})]})},$i=ee.ZP.div.withConfig({displayName:"RunTimeline__DividerContainer",componentId:"sc-1k6kbha-0"})(["position:absolute;top:0;left:","px;right:0;font-family:",";color:",";"],232,on.b.monospace,S.w.Gray400),Ji=ee.ZP.div.withConfig({displayName:"RunTimeline__DividerLabels",componentId:"sc-1k6kbha-1"})(["display:flex;align-items:center;height:","px;position:relative;user-select:none;width:100%;"],36),Qi=ee.ZP.div.withConfig({displayName:"RunTimeline__DividerLabel",componentId:"sc-1k6kbha-2"})(["position:absolute;transform:translateX(-50%);white-space:nowrap;"]),Wi=ee.ZP.div.withConfig({displayName:"RunTimeline__DividerLines",componentId:"sc-1k6kbha-3"})(["height:100%;position:relative;width:100%;box-shadow:inset 1px 0 0 ",",inset -1px 0 0 ",";"],S.w.KeylineGray,S.w.KeylineGray),Bi=ee.ZP.div.withConfig({displayName:"RunTimeline__DividerLine",componentId:"sc-1k6kbha-4"})(["background-color:",";height:100%;position:absolute;top:0;width:1px;"],S.w.KeylineGray),Vi=function(e){var n=!1,t=!1,r=!1,i=!1,o=!1;return e.forEach((function(e){var s=e.status;"SCHEDULED"===s?o=!0:Jr.sy.has(s)?t=!0:Jr.Ys.has(s)?n=!0:Jr.hd.has(s)?r=!0:Jr._m.has(s)&&(i=!0)})),t?S.w.Blue200:n?S.w.Blue500:r?S.w.Red500:i?S.w.Green500:o?S.w.Blue200:S.w.Gray500},Hi=function(e){var n=e.job,t=e.top,r=e.range,i=e.width,o=(0,b.Z)(r,2),s=o[0],a=o[1],c=i-232,u=n.runs,d=l.useMemo((function(){var e=function(e){for(var n=e.runs,t=e.start,r=e.end,i=e.width,o=e.minChunkWidth,s=e.minMultipleWidth,a=r-t,l=n.map((function(e){var n=e.startTime,r=e.endTime||Date.now();return{runs:[e],startTime:n,endTime:r,left:Math.max(0,Math.floor((n-t)/a*i)),width:Math.max(o,Math.min(Math.ceil((r-n)/a*i),Math.ceil((r-t)/a*i)))}})).sort((function(e,n){return n.left-e.left})),c=[];l.length;){var u=l.shift(),d=l[0];if(u)if(d&&Ui({start:u.left,end:u.left+Math.max(u.width,s)},{start:d.left,end:d.left+Math.max(d.width,s)})){l.shift(),u.runs=[].concat((0,un.Z)(u.runs),(0,un.Z)(d.runs)),u.startTime=Math.min(u.startTime,d.startTime),u.endTime=Math.max(u.endTime,d.endTime);var p=Math.max(u.left+s,u.left+u.width,d.left+d.width),h=Math.min(u.left,d.left);u.width=p-h,u.left=h,l.unshift(u)}else c.push(u)}return c}({runs:u,start:s,end:a,width:c,minChunkWidth:2,minMultipleWidth:16});return e}),[u,s,a,c]);return n.runs.length?(0,V.jsxs)(eo,{$top:t,children:[(0,V.jsx)(no,{children:(0,V.jsx)(E.rU,{to:n.path,children:n.jobName})}),(0,V.jsx)(to,{children:d.map((function(e){var t=e.left,r=e.width,i=e.runs.length;return(0,V.jsx)(ro,{$color:Vi(e.runs),$multiple:i>1,style:{left:"".concat(t,"px"),width:"".concat(r,"px")},children:(0,V.jsx)(sn.J,{content:(0,V.jsx)(oo,{jobKey:n.key,batch:e}),position:"top",interactionKind:"hover",className:"chunk-popover-target",children:(0,V.jsx)(f.x,{flex:{direction:"row",justifyContent:"center",alignItems:"center"},style:{height:"100%"},children:i>1?(0,V.jsx)(io,{children:e.runs.length}):null})})},e.runs[0].id)}))})]}):null},Yi=function(){return(0,V.jsx)(f.x,{flex:{justifyContent:"center",alignItems:"center"},padding:24,children:"No runs or upcoming runs found for this time window."})},Xi=ee.ZP.div.withConfig({displayName:"RunTimeline__Timeline",componentId:"sc-1k6kbha-5"})([""," position:relative;"],(function(e){var n=e.$height;return"height: ".concat(n,"px;")})),eo=ee.ZP.div.withConfig({displayName:"RunTimeline__Row",componentId:"sc-1k6kbha-6"})(["align-items:center;box-shadow:inset 0 -1px 0 ",";display:flex;flex-direction:row;width:100%;height:","px;padding:1px 0;position:absolute;left:0;top:0;",":first-child,:hover{box-shadow:inset 0 1px 0 ",",inset 0 -1px 0 ",";}:hover{background-color:",";}"],S.w.KeylineGray,25,(function(e){var n=e.$top;return"transform: translateY(".concat(n,"px);")}),S.w.KeylineGray,S.w.KeylineGray,S.w.Gray10),no=ee.ZP.div.withConfig({displayName:"RunTimeline__JobName",componentId:"sc-1k6kbha-7"})(["font-family:",";font-size:14px;line-height:16px;overflow:hidden;padding:0 12px 0 24px;text-overflow:ellipsis;white-space:nowrap;width:","px;"],on.b.monospace,232),to=ee.ZP.div.withConfig({displayName:"RunTimeline__RunChunks",componentId:"sc-1k6kbha-8"})(["flex:1;position:relative;height:","px;"],24),ro=ee.ZP.div.withConfig({displayName:"RunTimeline__RunChunk",componentId:"sc-1k6kbha-9"})(["align-items:center;background-color:",";border-radius:2px;height:","px;position:absolute;top:2px;",";transition:background-color 300ms linear,width 300ms ease-in-out;.chunk-popover-target{display:block;height:100%;width:100%;}"],(function(e){return e.$color}),20,(function(e){return e.$multiple?"min-width: ".concat(16,"px"):null})),io=ee.ZP.div.withConfig({displayName:"RunTimeline__BatchCount",componentId:"sc-1k6kbha-10"})(["color:",";cursor:default;font-size:12px;user-select:none;"],S.w.White),oo=function(e){var n=e.jobKey,t=e.batch;return(0,V.jsxs)(f.x,{style:{width:"260px"},children:[(0,V.jsx)(f.x,{padding:12,border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,V.jsx)(so,{children:n})}),(0,V.jsx)("div",{style:{maxHeight:"240px",overflowY:"auto"},children:t.runs.map((function(e,n){return(0,V.jsxs)(f.x,{border:n>0?{side:"top",width:1,color:S.w.KeylineGray}:null,flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},padding:{vertical:8,horizontal:12},children:[(0,V.jsxs)(f.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,V.jsx)(Ci.O_,{status:e.status,size:8}),"SCHEDULED"===e.status?"Scheduled":(0,V.jsx)(E.rU,{to:"/instance/runs/".concat(e.id),children:(0,V.jsx)(M.fv,{children:e.id.slice(0,8)})})]}),(0,V.jsx)(M.fv,{children:"SCHEDULED"===e.status?(0,V.jsx)(ln.v,{timestamp:e.startTime/1e3}):(0,V.jsx)(Ki.Q,{startUnix:e.startTime/1e3,endUnix:e.endTime/1e3})})]},e.id)}))})]})},so=ee.ZP.strong.withConfig({displayName:"RunTimeline__HoverContentJobName",componentId:"sc-1k6kbha-11"})(["display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;"]),ao=(0,p.Ps)(xr||(xr=(0,u.Z)(["\n  query RunTimelineQuery($inProgressFilter: RunsFilter!, $terminatedFilter: RunsFilter!) {\n    unterminated: runsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          ...RunTimeFragment\n        }\n      }\n    }\n    terminated: runsOrError(filter: $terminatedFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          ...RunTimeFragment\n        }\n      }\n    }\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),D.$X,Di),lo=t(2097),co=t(63579),uo=t(90933),po=function(e){var n=e.job,t=e.repoAddress,r=n.runs[0],i=(0,co.TE)().canLaunchPipelineReexecution,o=(0,d.useLazyQuery)(ho),s=(0,b.Z)(o,2),a=s[0],c=s[1].data,u="Run"===(null===c||void 0===c?void 0:c.pipelineRunOrError.__typename)?null===c||void 0===c?void 0:c.pipelineRunOrError:null,p=l.useCallback((function(){r.id&&a({variables:{runId:r.id}})}),[r,a]),h=Ht(u),f=(0,V.jsx)(gt.sN,{icon:"replay",text:"Re-execute latest run",onClick:function(){return h({type:"all"})},disabled:!i||!u||!(0,$t.EP)(u)}),m=(0,V.jsx)(gt.sN,{icon:"sync_problem",text:"Re-execute latest run from failure",onClick:function(){return h({type:"from-failure"})},disabled:!i||!u||!(0,$t.VM)(u)});return(0,V.jsx)(sn.J,{onOpened:function(){return p()},content:(0,V.jsxs)(gt.v2,{children:[(0,V.jsx)(uo.U,{to:(0,U.jT)({repoName:t.name,repoLocation:t.location,pipelineName:n.name,isJob:n.isJob}),icon:"job",text:"View job"}),(0,V.jsx)(uo.U,{to:(0,U.jT)({repoName:t.name,repoLocation:t.location,pipelineName:n.name,isJob:n.isJob,path:"/runs"}),icon:"checklist",text:"View all recent runs"}),i?f:(0,V.jsx)(xt.u,{content:co.c2,display:"block",children:f}),i?m:(0,V.jsx)(xt.u,{content:co.c2,display:"block",children:m})]}),position:"bottom-right",children:(0,V.jsx)(ye.zx,{icon:(0,V.jsx)(q.JO,{name:"expand_more"})})})},ho=(0,p.Ps)(vr||(vr=(0,u.Z)(["\n  query RunReExecutionQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        ...RunFragment\n      }\n    }\n  }\n\n  ","\n"])),nt.O.RunFragment),fo=t(63744),mo=function(e,n){return"search"===n.type?(0,w.Z)((0,w.Z)({},e),{},{searchValue:n.value}):e},go={searchValue:""},xo=function(){(0,g.Px)();var e=l.useReducer(mo,go),n=(0,b.Z)(e,2),t=n[0],r=n[1],i=l.useContext(Xe.C5),o=i.allRepos,s=i.visibleRepos,a=t.searchValue,c=(0,d.useQuery)(bo,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),u=c.data,p=c.loading,h=(0,d.useQuery)(Co,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),v=h.data,y=(0,R.V5)((0,R.C4)(h,R.dT),(0,R.C4)(c,R.dT)),j=l.useMemo((function(){var e=[],n=[],t=[],r=[],i=[],o=function(e,n){var t=e.job.runs[0]||null,r=n.job.runs[0]||null;return t.startTime?r.startTime?r.startTime-t.startTime:-1:r.startTime?-1:e.job.name.toLocaleLowerCase().localeCompare(n.job.name.toLocaleLowerCase())};if(u&&Object.keys(u).length&&"Workspace"===(null===u||void 0===u?void 0:u.workspaceOrError.__typename)){var s,a=(0,Hn.Z)(u.workspaceOrError.locationEntries);try{for(a.s();!(s=a.n()).done;){var l,c=s.value;if("WorkspaceLocationEntry"===c.__typename&&"RepositoryLocation"===(null===(l=c.locationOrLoadError)||void 0===l?void 0:l.__typename)){var d,p=(0,Hn.Z)(c.locationOrLoadError.repositories);try{for(p.s();!(d=p.n()).done;){var h,f=d.value,m=(0,Hn.Z)(f.pipelines);try{var g=function(){var o=h.value,s=o.runs,a=(f.schedules||[]).filter((function(e){return e.pipelineName===o.name})),l=(f.sensors||[]).filter((function(e){var n;return null===(n=e.targets)||void 0===n?void 0:n.map((function(e){return e.pipelineName})).includes(o.name)})),u=(0,K.k)(f.name,c.locationOrLoadError.name);if(s.length){var d=s[0].status,p={job:o,schedules:a,sensors:l,repoAddress:u};Jr.hd.has(d)?e.push(p):Jr.Ys.has(d)?n.push(p):Jr._m.has(d)?t.push(p):Jr.sy.has(d)?r.push(p):i.push(p)}};for(m.s();!(h=m.n()).done;)g()}catch(x){m.e(x)}finally{m.f()}}}catch(x){p.e(x)}finally{p.f()}}}}catch(x){a.e(x)}finally{a.f()}}return e.sort(o),n.sort(o),r.sort(o),t.sort(o),i.sort(o),{failed:e,inProgress:n,queued:r,succeeded:t,neverRan:i}}),[u]),C=l.useMemo((function(){var e=a.toLocaleLowerCase(),n=function(n){var t=n.job,r=n.repoAddress;return s.some((function(e){return e.repository.name===r.name&&e.repositoryLocation.name===r.location}))&&t.name.toLocaleLowerCase().includes(e)&&!(0,x.pv)(t.name)},t=j.failed,r=j.inProgress,i=j.queued,o=j.succeeded,l=j.neverRan;return{failed:t.filter(n),inProgress:r.filter(n),queued:i.filter(n),succeeded:o.filter(n),neverRan:l.filter(n)}}),[j,s,a]),k=l.useMemo((function(){if(!v||0===Object.keys(v).length)return null;var e={};if("Workspace"===v.workspaceOrError.__typename){var n,t=(0,Hn.Z)(v.workspaceOrError.locationEntries);try{for(t.s();!(n=t.n()).done;){var r,i=n.value;if("WorkspaceLocationEntry"===i.__typename&&"RepositoryLocation"===(null===(r=i.locationOrLoadError)||void 0===r?void 0:r.__typename)){var o,s=(0,Hn.Z)(i.locationOrLoadError.repositories);try{for(s.s();!(o=s.n()).done;){var a,l=o.value,c=(0,Hn.Z)(l.pipelines);try{for(c.s();!(a=c.n()).done;){var u=a.value;e[zi((0,K.k)(l.name,i.locationOrLoadError.name),u.name)]=u.runs}}catch(d){c.e(d)}finally{c.f()}}}catch(d){s.e(d)}finally{s.f()}}}}catch(d){t.e(d)}finally{t.f()}}return e}),[v]),T=l.useMemo((function(){return Object.values(C).reduce((function(e,n){return[].concat((0,un.Z)(e),(0,un.Z)(n))}),[])}),[C]),N=l.useMemo((function(){var e=function(e){var n=e.job,t=e.repoAddress,r=zi(t,n.name),i=k&&k[r]||[];return(0,w.Z)((0,w.Z)({},e),{},{runs:(0,un.Z)(i).reverse()})},n=C.failed,t=C.inProgress,r=C.queued,i=C.succeeded,o=C.neverRan;return{failed:n.map(e),inProgress:t.map(e),queued:r.map(e),succeeded:i.map(e),neverRan:o.map(e)}}),[k,C]);if(!u||0===Object.keys(u).length)return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Ve.m,{title:(0,V.jsx)(M.X6,{children:"Instance status"}),tabs:(0,V.jsx)(ci,{tab:"overview",refreshState:y})}),(0,V.jsx)(f.x,{padding:64,children:(0,V.jsx)(m.$,{purpose:"section"})})]});var I=N.failed,_=N.inProgress,E=N.queued,Z=N.succeeded,O=N.neverRan;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Ve.m,{title:(0,V.jsx)(M.X6,{children:"Instance status"}),tabs:(0,V.jsx)(ci,{tab:"overview",refreshState:y})}),(0,V.jsxs)(f.x,{padding:{horizontal:24,top:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[o.length>1&&(0,V.jsx)(en,{}),(0,V.jsx)(je.oi,{icon:"search",value:a,onChange:function(e){return r({type:"search",value:e.target.value})},placeholder:"Filter by job name\u2026",style:{width:"340px"}})]}),(0,V.jsx)(yo,{jobs:T,loading:p}),_.length?(0,V.jsx)(jo,{icon:(0,V.jsx)(q.JO,{name:"hourglass_bottom",color:S.w.Blue500,size:24}),heading:1===_.length?"1 job in progress":"".concat(_.length," jobs in progress"),jobs:_}):null,I.length?(0,V.jsx)(jo,{icon:(0,V.jsx)(q.JO,{name:"error_outline",color:S.w.Red500,size:24}),heading:1===I.length?"1 job failed":"".concat(I.length," jobs failed"),jobs:I}):null,E.length?(0,V.jsx)(jo,{icon:(0,V.jsx)(q.JO,{name:"checklist",color:S.w.Gray500,size:24}),heading:1===E.length?"1 job queued":"".concat(E.length," jobs queued"),jobs:E}):null,Z.length?(0,V.jsx)(jo,{icon:(0,V.jsx)(q.JO,{name:"check_circle",color:S.w.Green500,size:24}),heading:1===Z.length?"1 job succeeded":"".concat(Z.length," jobs succeeded"),jobs:Z}):null,O.length?(0,V.jsx)(jo,{icon:(0,V.jsx)(q.JO,{name:"history_toggle_off",color:S.w.Gray900,size:24}),heading:1===O.length?"1 job never ran":"".concat(O.length," jobs never ran"),jobs:O}):null]})},vo=36e5,yo=function(e){var n=e.jobs,t=e.loading,r=l.useState(!0),i=(0,b.Z)(r,2),o=i[0],s=i[1],a=l.useState("6"),c=(0,b.Z)(a,2),u=c[0],d=c[1],p=l.useRef(Date.now());l.useEffect((function(){t||(p.current=Date.now())}),[t]);var h=Math.floor(p.current/1e3),m=l.useMemo((function(){return[1e3*h-Number(u)*vo,1e3*h+36e5]}),[u,h]),g=l.useMemo((function(){var e=(0,b.Z)(m,2),n=e[0],t=e[1];return t<n?[t,n]:[n,t]}),[m]),x=(0,b.Z)(g,2),v=x[0],y=x[1],j=n.map((function(e){return{key:zi(e.repoAddress,e.job.name),jobName:e.job.name,path:(0,U.jT)({repoName:e.repoAddress.name,repoLocation:e.repoAddress.location,pipelineName:e.job.name,isJob:e.job.isJob}),runs:[]}}));return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(f.x,{flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},margin:{top:16},padding:{bottom:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:[(0,V.jsxs)(f.x,{flex:{alignItems:"center",gap:8},children:[(0,V.jsx)(q.JO,{name:"waterfall_chart",color:S.w.Gray900,size:20}),(0,V.jsx)(M.X6,{children:"Timeline"})]}),(0,V.jsxs)(f.x,{flex:{alignItems:"center",gap:8},children:[o?(0,V.jsx)(xe.h,{activeItems:new Set([u]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:function(e){return d(e)}}):null,(0,V.jsx)(ye.zx,{icon:(0,V.jsx)(q.JO,{name:o?"unfold_less":"unfold_more"}),onClick:function(){return s((function(e){return!e}))},children:o?"Hide":"Show"})]})]}),o?(0,V.jsx)(Mi,{range:[v,y],jobs:j,hourWindow:u}):null]})},jo=function(e){var n=e.icon,t=e.heading,r=e.jobs;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(f.x,{flex:{direction:"row",gap:8,alignItems:"center"},margin:{top:16},padding:{vertical:16,horizontal:24},children:[n,(0,V.jsx)(M.X6,{children:t})]}),(0,V.jsxs)(ji.i,{children:[(0,V.jsx)("thead",{children:(0,V.jsxs)("tr",{children:[(0,V.jsx)("th",{style:{width:"40%"},children:"Job"}),(0,V.jsx)("th",{style:{width:"25%"},children:"Trigger"}),(0,V.jsx)("th",{style:{width:"35%"},children:"Latest run"}),(0,V.jsx)("th",{})]})}),(0,V.jsx)("tbody",{children:r.map((function(e){var n=e.job,t=e.repoAddress,r=e.runs,i=e.schedules,o=e.sensors,s=zi(t,n.name),a=(0,Ai.l)(t);return(0,V.jsxs)("tr",{children:[(0,V.jsx)("td",{children:(0,V.jsxs)(f.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,V.jsxs)(f.x,{flex:{direction:"column",gap:4},children:[(0,V.jsxs)(f.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,V.jsx)(W.h,{pipelineName:n.name,isJob:n.isJob,pipelineHrefContext:t}),n.isJob?null:(0,V.jsx)(wi.l,{})]}),(0,V.jsx)(M.uT,{color:S.w.Gray400,style:{fontFamily:on.b.monospace},children:a})]}),r?(0,V.jsx)(f.x,{margin:{top:4},children:(0,V.jsx)(Ti,{fade:!0,runs:r,repoAddress:a})}):null]})}),(0,V.jsx)("td",{children:i.length||o.length?(0,V.jsxs)(f.x,{flex:{direction:"column",alignItems:"flex-start",gap:8},children:[(0,V.jsx)(pe.I,{schedules:i,sensors:o,repoAddress:t}),i.length?(0,V.jsx)(Fi,{schedules:i}):null]}):(0,V.jsx)("div",{style:{color:S.w.Gray500},children:"None"})}),(0,V.jsx)("td",{children:(0,V.jsx)(fo.Z,{run:n.runs[0]})}),(0,V.jsx)("td",{children:(0,V.jsx)(po,{job:n,repoAddress:t})})]},s)}))})]})]})},wo=(0,p.Ps)(yr||(yr=(0,u.Z)(["\n  fragment OverviewJobFragment on Pipeline {\n    id\n    name\n    isJob\n    runs(limit: 1) {\n      id\n      mode\n      runId\n      status\n      ...RunTimeFragment\n    }\n    modes {\n      id\n      name\n    }\n  }\n\n  ","\n"])),D.$X),bo=(0,p.Ps)(jr||(jr=(0,u.Z)(["\n  query InstanceOverviewInitialQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  ...OverviewJobFragment\n                }\n                ...RepositoryInfoFragment\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                  ...ScheduleSwitchFragment\n                }\n                sensors {\n                  id\n                  name\n                  targets {\n                    pipelineName\n                  }\n                  sensorState {\n                    id\n                    status\n                  }\n                  ...SensorSwitchFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),wo,lo.x,Di,he.J,fe.U,fn.Bq),Co=(0,p.Ps)(wr||(wr=(0,u.Z)(["\n  query LastTenRunsPerJobQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                  runs(limit: 10) {\n                    id\n                    ...RunTimeFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),fn.Bq,D.$X),ko=t(45352),So=t(56313),To=t(98191),No=l.memo((function(){(0,g.Px)();var e=(0,d.useQuery)(_o,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),n=(0,R.C4)(e,R.dT);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Ve.m,{title:(0,V.jsx)(M.X6,{children:"Instance status"}),tabs:(0,V.jsx)(ci,{tab:"schedules",refreshState:n})}),(0,V.jsx)(Ar.g,{queryResult:e,allowStaleData:!0,children:function(e){return(0,V.jsx)(Io,{data:e})}})]})})),Io=function(e){var n=e.data,t=n.instance,r=n.repositoriesOrError,i=n.unloadableInstigationStatesOrError;if("PythonError"===r.__typename)return(0,V.jsx)(fn.T9,{error:r});if("PythonError"===i.__typename)return(0,V.jsx)(fn.T9,{error:i});var o=i.results,s=r.nodes.filter((function(e){return e.schedules.length})),a=s.length?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(f.x,{padding:{vertical:16,horizontal:24},children:(0,V.jsx)(Mr.K,{daemonHealth:t.daemonHealth})}),s.map((function(e){return(0,V.jsxs)(l.Fragment,{children:[(0,V.jsx)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:S.w.KeylineGray},children:(0,V.jsx)(M.pm,{children:"".concat((0,K.i)(e.name,e.location.name))})}),(0,V.jsx)(f.x,{padding:{bottom:16},children:(0,V.jsx)(To.P,{repoAddress:(0,K.k)(e.name,e.location.name),schedules:e.schedules})})]},e.name)}))]}):null,c=o.filter((function(e){return e.instigationType===A._5.SCHEDULE})),u=c.length?(0,V.jsx)(So.Y,{scheduleStates:c}):null;return a||u?(0,V.jsxs)(bn.Z,{direction:"column",spacing:32,children:[a,u]}):(0,V.jsx)(f.x,{margin:{top:32},children:(0,V.jsx)(N.t,{icon:"schedule",title:"No schedules found",description:(0,V.jsxs)("div",{children:["This instance does not have any schedules defined. Visit the"," ",(0,V.jsx)("a",{href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules",target:"_blank",rel:"noreferrer",children:"scheduler documentation"})," ","for more information about scheduling runs in Dagster."]})})})},_o=(0,p.Ps)(br||(br=(0,u.Z)(["\n  query InstanceSchedulesQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n    repositoriesOrError {\n      __typename\n      ... on RepositoryConnection {\n        nodes {\n          id\n          name\n          ...RepositoryInfoFragment\n          schedules {\n            id\n            ...ScheduleFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),Ur.O,lo.x,zr.GA,fn.Bq,ko.ai),Eo=t(20925),Ro=t(57466),Zo=t(87669),Oo=l.memo((function(){(0,g.Px)();var e=(0,d.useQuery)(Lo,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),n=(0,R.C4)(e,R.dT);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Ve.m,{title:(0,V.jsx)(M.X6,{children:"Instance status"}),tabs:(0,V.jsx)(ci,{tab:"sensors",refreshState:n})}),(0,V.jsx)(Ar.g,{queryResult:e,allowStaleData:!0,children:function(e){return(0,V.jsx)(Po,{data:e})}})]})})),Po=function(e){var n=e.data,t=n.instance,r=n.repositoriesOrError,i=n.unloadableInstigationStatesOrError;if("PythonError"===r.__typename)return(0,V.jsx)(fn.T9,{error:r});if("PythonError"===i.__typename)return(0,V.jsx)(fn.T9,{error:i});var o=i.results,s=r.nodes.filter((function(e){return e.sensors.length})),a=s.length?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(f.x,{padding:{horizontal:24,vertical:16},children:(0,V.jsx)(Ro.F,{daemonHealth:t.daemonHealth})}),s.map((function(e){return e.sensors.length?(0,V.jsxs)(l.Fragment,{children:[(0,V.jsx)(f.x,{padding:{horizontal:24,vertical:16},border:{side:"top",width:1,color:S.w.KeylineGray},children:(0,V.jsx)(M.pm,{children:"".concat((0,K.i)(e.name,e.location.name))})}),(0,V.jsx)(f.x,{padding:{bottom:16},children:(0,V.jsx)(Zo.J,{repoAddress:(0,K.k)(e.name,e.location.name),sensors:e.sensors})})]},e.name):null}))]}):null,c=o.filter((function(e){return e.instigationType===A._5.SENSOR})),u=c.length?(0,V.jsx)(So.e,{sensorStates:c}):null;return a||u?(0,V.jsxs)(V.Fragment,{children:[a,u]}):(0,V.jsx)(f.x,{padding:{vertical:64},border:{side:"top",width:1,color:S.w.KeylineGray},children:(0,V.jsx)(N.t,{icon:"sensors",title:"No sensors found",description:(0,V.jsxs)("p",{children:["This instance does not have any sensors defined. Visit the"," ",(0,V.jsx)("a",{href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules",target:"_blank",rel:"noreferrer",children:"sensor documentation"})," ","for more information about setting up sensors in Dagster."]})})})},Lo=(0,p.Ps)(Cr||(Cr=(0,u.Z)(["\n  query InstanceSensorsQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n    repositoriesOrError {\n      __typename\n      ... on RepositoryConnection {\n        nodes {\n          id\n          name\n          ...RepositoryInfoFragment\n          sensors {\n            id\n            ...SensorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),Ur.O,lo.x,fn.Bq,Eo.l,ko.ai),Fo=function(){return(0,V.jsx)(h.T,{children:(0,V.jsxs)(c.rs,{children:[(0,V.jsx)(c.AW,{path:"/instance/overview",children:(0,V.jsx)(xo,{})}),(0,V.jsx)(c.AW,{path:"/instance/health",children:(0,V.jsx)(vi,{})}),(0,V.jsx)(c.AW,{path:"/instance/schedules",children:(0,V.jsx)(No,{})}),(0,V.jsx)(c.AW,{path:"/instance/sensors",children:(0,V.jsx)(Oo,{})}),(0,V.jsx)(c.AW,{path:"/instance/backfills",children:(0,V.jsx)(ui,{})}),(0,V.jsx)(c.AW,{path:"/instance/config",children:(0,V.jsx)(mi,{})}),(0,V.jsx)(c.AW,{path:"*",render:function(){return(0,V.jsx)(c.l_,{to:"/instance"})}})]})})},Do=function(){var e=(0,c.TH)().pathname,n=l.useRef(null);return l.useEffect((function(){var e;null===(e=n.current)||void 0===e||e.scrollTo({top:0})}),[e]),(0,V.jsx)(a.M,{ref:n,children:(0,V.jsxs)(c.rs,{children:[(0,V.jsx)(c.AW,{path:"/instance/asset-groups(/?.*)",children:(0,V.jsx)(rn,{})}),(0,V.jsx)(c.AW,{path:"/instance/assets(/?.*)",children:(0,V.jsx)(We,{})}),(0,V.jsx)(c.AW,{path:"/instance/runs",exact:!0,children:(0,V.jsx)(Vr,{})}),(0,V.jsx)(c.AW,{path:"/instance/runs/:runId",exact:!0,children:(0,V.jsx)(Er,{})}),(0,V.jsx)(c.AW,{path:"/instance/snapshots/:pipelinePath/:tab?",children:(0,V.jsx)(si,{})}),(0,V.jsx)(c.AW,{path:"/instance/:tab",children:(0,V.jsx)(Fo,{})}),(0,V.jsx)(c.AW,{path:"*",render:function(){return(0,V.jsx)(c.l_,{to:"/instance/overview"})}})]})})},Ao=Do},60453:function(e){"use strict";var n=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var t=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]],r=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0}return n(e,null,[{key:"escapeForHtml",value:function(n){return(new e).escapeForHtml(n)}},{key:"linkify",value:function(n){return(new e).linkify(n)}},{key:"ansiToHtml",value:function(n,t){return(new e).ansiToHtml(n,t)}},{key:"ansiToJson",value:function(n,t){return(new e).ansiToJson(n,t)}},{key:"ansiToText",value:function(n){return(new e).ansiToText(n)}}]),n(e,[{key:"setupPalette",value:function(){this.PALETTE_COLORS=[];for(var e=0;e<2;++e)for(var n=0;n<8;++n)this.PALETTE_COLORS.push(t[e][n].color);for(var r=[0,95,135,175,215,255],i=function(e,n,t){return r[e]+", "+r[n]+", "+r[t]},o=0;o<6;++o)for(var s=0;s<6;++s)for(var a=0;a<6;++a)this.PALETTE_COLORS.push(i(o,s,a));for(var l=8,c=0;c<24;++c,l+=10)this.PALETTE_COLORS.push(i(l,l,l))}},{key:"escapeForHtml",value:function(e){return e.replace(/[&<>]/gm,(function(e){return"&"==e?"&amp;":"<"==e?"&lt;":">"==e?"&gt;":""}))}},{key:"linkify",value:function(e){return e.replace(/(https?:\/\/[^\s]+)/gm,(function(e){return'<a href="'+e+'">'+e+"</a>"}))}},{key:"ansiToHtml",value:function(e,n){return this.process(e,n,!0)}},{key:"ansiToJson",value:function(e,n){return(n=n||{}).json=!0,n.clearLine=!1,this.process(e,n,!0)}},{key:"ansiToText",value:function(e){return this.process(e,{},!1)}},{key:"process",value:function(e,n,t){var r=this,i=e.split(/\033\[/),o=i.shift();void 0!==n&&null!==n||(n={}),n.clearLine=/\r/.test(e);var s=i.map((function(e){return r.processChunk(e,n,t)}));if(n&&n.json){var a=this.processChunkJson("");return a.content=o,a.clearLine=n.clearLine,s.unshift(a),n.remove_empty&&(s=s.filter((function(e){return!e.isEmpty()}))),s}return s.unshift(o),s.join("")}},{key:"processChunkJson",value:function(e,n,r){var i=(n="undefined"==typeof n?{}:n).use_classes="undefined"!=typeof n.use_classes&&n.use_classes,o=n.key=i?"class":"color",s={content:e,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,clearLine:n.clearLine,decoration:null,was_processed:!1,isEmpty:function(){return!s.content}},a=e.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!a)return s;s.content=a[4];var l=a[2].split(";");if(""!==a[1]||"m"!==a[3])return s;if(!r)return s;var c=this;for(c.decoration=null;l.length>0;){var u=l.shift(),d=parseInt(u);if(isNaN(d)||0===d)c.fg=c.bg=c.decoration=null;else if(1===d)c.decoration="bold";else if(2===d)c.decoration="dim";else if(3==d)c.decoration="italic";else if(4==d)c.decoration="underline";else if(5==d)c.decoration="blink";else if(7===d)c.decoration="reverse";else if(8===d)c.decoration="hidden";else if(9===d)c.decoration="strikethrough";else if(39==d)c.fg=null;else if(49==d)c.bg=null;else if(d>=30&&d<38)c.fg=t[0][d%10][o];else if(d>=90&&d<98)c.fg=t[1][d%10][o];else if(d>=40&&d<48)c.bg=t[0][d%10][o];else if(d>=100&&d<108)c.bg=t[1][d%10][o];else if(38===d||48===d){var p=38===d;if(l.length>=1){var h=l.shift();if("5"===h&&l.length>=1){var f=parseInt(l.shift());if(f>=0&&f<=255)if(i){var m=f>=16?"ansi-palette-"+f:t[f>7?1:0][f%8].class;p?c.fg=m:c.bg=m}else this.PALETTE_COLORS||c.setupPalette(),p?c.fg=this.PALETTE_COLORS[f]:c.bg=this.PALETTE_COLORS[f]}else if("2"===h&&l.length>=3){var g=parseInt(l.shift()),x=parseInt(l.shift()),v=parseInt(l.shift());if(g>=0&&g<=255&&x>=0&&x<=255&&v>=0&&v<=255){var y=g+", "+x+", "+v;i?p?(c.fg="ansi-truecolor",c.fg_truecolor=y):(c.bg="ansi-truecolor",c.bg_truecolor=y):p?c.fg=y:c.bg=y}}}}}if(null===c.fg&&null===c.bg&&null===c.decoration)return s;return s.fg=c.fg,s.bg=c.bg,s.fg_truecolor=c.fg_truecolor,s.bg_truecolor=c.bg_truecolor,s.decoration=c.decoration,s.was_processed=!0,s}},{key:"processChunk",value:function(e,n,t){var r=this;n=n||{};var i=this.processChunkJson(e,n,t);if(n.json)return i;if(i.isEmpty())return"";if(!i.was_processed)return i.content;var o=n.use_classes,s=[],a=[],l={},c=function(e){var n=[],t=void 0;for(t in e)e.hasOwnProperty(t)&&n.push("data-"+t+'="'+r.escapeForHtml(e[t])+'"');return n.length>0?" "+n.join(" "):""};return i.fg&&(o?(a.push(i.fg+"-fg"),null!==i.fg_truecolor&&(l["ansi-truecolor-fg"]=i.fg_truecolor,i.fg_truecolor=null)):s.push("color:rgb("+i.fg+")")),i.bg&&(o?(a.push(i.bg+"-bg"),null!==i.bg_truecolor&&(l["ansi-truecolor-bg"]=i.bg_truecolor,i.bg_truecolor=null)):s.push("background-color:rgb("+i.bg+")")),i.decoration&&(o?a.push("ansi-"+i.decoration):"bold"===i.decoration?s.push("font-weight:bold"):"dim"===i.decoration?s.push("opacity:0.5"):"italic"===i.decoration?s.push("font-style:italic"):"reverse"===i.decoration?s.push("filter:invert(100%)"):"hidden"===i.decoration?s.push("visibility:hidden"):"strikethrough"===i.decoration?s.push("text-decoration:line-through"):s.push("text-decoration:"+i.decoration)),o?'<span class="'+a.join(" ")+'"'+c(l)+">"+i.content+"</span>":'<span style="'+s.join(";")+'"'+c(l)+">"+i.content+"</span>"}}]),e}();e.exports=r},65502:function(e,n,t){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n};Object.defineProperty(n,"__esModule",{value:!0});var o=r(t(60453)),s=t(76267),a=i(t(325)),l=/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/;function c(e,n,t,r){var i=n?null:function(e){var n={};return e.bg&&(n.backgroundColor="rgb(".concat(e.bg,")")),e.fg&&(n.color="rgb(".concat(e.fg,")")),n}(t),o=n?function(e){var n="";return e.bg||e.fg?(e.bg&&(n+=e.bg+" "),e.fg&&(n+=e.fg+" "),n=n.substring(0,n.length-1)):null}(t):null;if(!e)return a.createElement("span",{style:i,key:r,className:o},t.content);var s=t.content.split(/(\s+)/).reduce((function(e,n,t){return t%2===1?(e.push(n),e):l.test(n)?(e.push(a.createElement("a",{key:t,href:n,target:"_blank"},"".concat(n))),e):(e.push(n),e)}),[]);return a.createElement("span",{style:i,key:r,className:o},s)}n.default=function(e){var n=e.className,t=e.useClasses,r=e.children,i=e.linkify;return a.createElement("code",{className:n},function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=s.escapeCarriageReturn(e),o.default.ansiToJson(e,{json:!0,remove_empty:!0,use_classes:n})}(r,!!t).map(c.bind(null,i,!!t)))}},76267:function(e){function n(e){if(!e)return"";if(!/\r/.test(e))return e;for(e=e.replace(/\r+\n/gm,"\n");/\r[^$]/.test(e);){var n=/^(.*)\r+/m.exec(e)[1],t=/\r+(.*)$/m.exec(e)[1];t+=n.slice(t.length,n.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,t)}return e}function t(e){for(var n=0,t=0;t<e.length;t++)e[n].length<=e[t].length&&(n=t);return n}function r(e){if(!/\r/.test(e))return e;for(var n=e.split("\r"),r=[];n.length>0;){var i=t(n);r.push(n[i]),n=n.slice(i+1)}return r.join("\r")}e.exports=n,e.exports.escapeCarriageReturn=n,e.exports.escapeCarriageReturnSafe=function(e){if(!e)return"";if(!/\r/.test(e))return e;if(!/\n/.test(e))return r(e);var t=(e=e.replace(/\r+\n/gm,"\n")).lastIndexOf("\n");return n(e.slice(0,t))+"\n"+r(e.slice(t+1))}},72844:function(e,n,t){var r=t(43615),i=t(78408);e.exports=function(e,n,t){var o=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(t)&&(o="leading"in t?!!t.leading:o,s="trailing"in t?!!t.trailing:s),r(e,n,{leading:o,maxWait:n,trailing:s})}}}]);
//# sourceMappingURL=110.063fcfba.chunk.js.map